<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamSync - Rüya Paylaşım ve Analiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dream: {
                            primary: '#6366f1', // Indigo
                            secondary: '#a855f7', // Purple
                            accent: '#ec4899', // Pink
                            light: '#f3f4f6',
                            dark: '#1f2937',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' },
                        },
                    },
                    boxShadow: {
                        'dream': '0 4px 14px 0 rgba(101, 119, 247, 0.2)',
                    },
                    backgroundImage: {
                        'dream-gradient': 'linear-gradient(120deg, #6366f1, #a855f7, #ec4899)',
                        'dream-gradient-dark': 'linear-gradient(120deg, #4f46e5, #7e22ce, #be185d)',
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
        }
        
        .bg-stars {
            background-color: #0f172a;
            background-image: radial-gradient(white, rgba(255, 255, 255, 0.1) 2px, transparent 2px);
            background-size: 50px 50px;
        }
        
        .dream-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: all 0.3s ease;
        }
        
        .dark .dream-card {
            background: rgba(31, 41, 55, 0.7);
            border: 1px solid rgba(55, 65, 81, 0.5);
        }
        
        .dream-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .dark .dream-card:hover {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .shimmer {
            background: linear-gradient(100deg, 
                rgba(255, 255, 255, 0) 20%, 
                rgba(255, 255, 255, 0.25) 50%, 
                rgba(255, 255, 255, 0) 80%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        .dark .shimmer {
            background: linear-gradient(100deg, 
                rgba(45, 55, 72, 0) 20%, 
                rgba(45, 55, 72, 0.25) 50%, 
                rgba(45, 55, 72, 0) 80%);
            background-size: 200% 100%;
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        .bg-blur {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        /* Disable scrollbar for code */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: #6366f1;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
        }
        
        .dark input[type="range"]::-webkit-slider-thumb {
            border-color: #1f2937;
        }
        
        /* Recording animation */
        @keyframes recording-pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
        .recording-pulse {
            animation: recording-pulse 2s infinite;
        }
        
        /* Credit count badge animation */
        @keyframes pulse-ring {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 5px rgba(99, 102, 241, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }
        
        .credit-pulse {
            animation: pulse-ring 2s infinite;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen transition-colors duration-200">
    <!-- Dark mode detector -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- Container -->
    <div class="mx-auto max-w-6xl px-4 py-5">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <div class="flex items-center">
                <!-- Back Button (hidden on welcome screen) -->
                <button id="back-button" class="mr-2 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors hidden">
                    <i class="fas fa-arrow-left"></i>
                </button>
                
                <div class="relative w-12 h-12 mr-3">
                    <div class="absolute inset-0 bg-dream-gradient rounded-xl opacity-70 animate-pulse-slow"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i class="fas fa-moon text-white text-2xl"></i>
                    </div>
                </div>
                <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-dream-gradient dark:bg-dream-gradient-dark">
                    Dream<span class="font-light">Sync</span>
                </h1>
            </div>
            
            <!-- User Profile / Login Area -->
            <div id="login-area" class="flex items-center">
                <button id="login-button" class="ml-2 px-4 py-2 bg-dream-primary text-white rounded-lg transition-colors hover:bg-dream-primary/90">
                    <i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap
                </button>
                <button id="register-button" class="ml-2 px-4 py-2 bg-white dark:bg-gray-800 text-dream-primary dark:text-dream-secondary border border-dream-primary dark:border-dream-secondary rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-700">
                    <i class="fas fa-user-plus mr-2"></i> Kayıt Ol
                </button>
            </div>
            
            <!-- Logged In User Area (Hidden by default) -->
            <div id="user-area" class="hidden items-center">
                <div id="credit-counter" class="relative mr-4">
                    <div class="flex items-center px-3 py-1.5 bg-dream-primary/10 dark:bg-dream-primary/20 text-dream-primary dark:text-dream-secondary rounded-full">
                        <i class="fas fa-star mr-2"></i>
                        <span id="credit-count">3</span> <span class="ml-1 text-xs">kredi</span>
                    </div>
                </div>
                <div class="relative group">
                    <button id="user-menu-button" class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-dream-gradient flex items-center justify-center text-white mr-2">
                            <span id="user-initial">K</span>
                        </div>
                        <span id="username-display" class="hidden md:inline-block">KullanıcıAdı</span>
                        <i class="fas fa-chevron-down ml-2 text-xs opacity-70"></i>
                    </button>
                    
                    <div id="user-dropdown" class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 hidden">
                        <div class="p-3 border-b border-gray-200 dark:border-gray-700">
                            <p id="dropdown-username" class="font-medium">KullanıcıAdı</p>
                            <p id="dropdown-email" class="text-xs text-gray-500 dark:text-gray-400">kullanici@mail.com</p>
                        </div>
                        <div>
                            <a href="#" id="account-btn" class="flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i class="fas fa-user text-gray-500 dark:text-gray-400 w-5"></i>
                                <span class="ml-2">Hesabım</span>
                            </a>
                            <a href="#" id="credits-btn" class="flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i class="fas fa-star text-gray-500 dark:text-gray-400 w-5"></i>
                                <span class="ml-2">Kredi Satın Al</span>
                            </a>
                            <a href="#" id="settings-btn" class="flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i class="fas fa-cog text-gray-500 dark:text-gray-400 w-5"></i>
                                <span class="ml-2">Ayarlar</span>
                            </a>
                            <a href="#" id="theme-btn" class="flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i class="fas fa-moon text-gray-500 dark:text-gray-400 w-5 dark:hidden"></i>
                                <i class="fas fa-sun text-gray-500 dark:text-gray-400 w-5 hidden dark:block"></i>
                                <span class="ml-2">Tema Değiştir</span>
                            </a>
                            <hr class="border-gray-200 dark:border-gray-700">
                            <a href="#" id="logout-btn" class="flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i class="fas fa-sign-out-alt text-gray-500 dark:text-gray-400 w-5"></i>
                                <span class="ml-2">Çıkış Yap</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Nav Toggle -->
            <button id="mobile-nav-toggle" class="md:hidden bg-white dark:bg-gray-800 p-2 rounded-lg shadow-md ml-2">
                <i class="fas fa-bars text-dream-primary"></i>
            </button>
        </header>
        
        <!-- Mobile Navigation Menu (Hidden by default) -->
        <div id="mobile-nav" class="hidden md:hidden bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6 transition-all">
            <div class="flex flex-col space-y-2">
                <!-- Mobile User Section - Shown only when logged in -->
                <div id="mobile-user-section" class="hidden">
                    <div class="flex items-center p-3 mb-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <div class="w-10 h-10 rounded-full bg-dream-gradient flex items-center justify-center text-white mr-3">
                            <span id="mobile-user-initial">K</span>
                        </div>
                        <div>
                            <p id="mobile-username" class="font-medium">KullanıcıAdı</p>
                            <div class="flex items-center text-xs text-dream-primary dark:text-dream-secondary">
                                <i class="fas fa-star mr-1"></i>
                                <span id="mobile-credit-count">3</span> kredi
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mobile Login/Register - Shown only when logged out -->
                <div id="mobile-auth-section" class="grid grid-cols-2 gap-2 mb-3">
                    <button id="mobile-login-button" class="px-4 py-2.5 bg-dream-primary text-white rounded-lg transition-colors hover:bg-dream-primary/90">
                        <i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap
                    </button>
                    <button id="mobile-register-button" class="px-4 py-2.5 bg-white dark:bg-gray-700 text-dream-primary dark:text-dream-secondary border border-dream-primary dark:border-dream-secondary rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-600">
                        <i class="fas fa-user-plus mr-2"></i> Kayıt Ol
                    </button>
                </div>
                
                <button id="mobile-nav-journal" class="mobile-nav-btn flex items-center px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <i class="fas fa-book mr-3 text-dream-primary"></i> Rüya Günlüğüm
                </button>
                <button id="mobile-nav-community" class="mobile-nav-btn flex items-center px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <i class="fas fa-users mr-3 text-dream-primary"></i> Topluluk
                </button>
                <button id="mobile-nav-training" class="mobile-nav-btn flex items-center px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <i class="fas fa-brain mr-3 text-dream-primary"></i> Lucid Dreaming Eğitimi
                </button>
                
                <!-- Mobile User Options - Shown only when logged in -->
                <div id="mobile-user-options" class="hidden pt-2 mt-2 border-t border-gray-200 dark:border-gray-700">
                    <button id="mobile-account-btn" class="w-full text-left flex items-center px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas fa-user mr-3 text-gray-500"></i> Hesabım
                    </button>
                    <button id="mobile-credits-btn" class="w-full text-left flex items-center px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas fa-star mr-3 text-gray-500"></i> Kredi Satın Al
                    </button>
                    <button id="mobile-logout-btn" class="w-full text-left flex items-center px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas fa-sign-out-alt mr-3 text-gray-500"></i> Çıkış Yap
                    </button>
                </div>
                
                <hr class="border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center px-4 py-3">
                    <span class="text-gray-700 dark:text-gray-300">Karanlık Mod</span>
                    <button id="mobile-theme-toggle" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700">
                        <i class="fas fa-moon dark:hidden text-dream-primary"></i>
                        <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Desktop Navigation -->
        <nav id="desktop-nav" class="hidden md:flex mb-8 bg-white dark:bg-gray-800 rounded-xl shadow-sm py-2 px-1">
            <button id="nav-journal" class="nav-btn flex-1 px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                <i class="fas fa-book mr-2"></i> Günlüğüm
            </button>
            <button id="nav-community" class="nav-btn flex-1 px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                <i class="fas fa-users mr-2"></i> Topluluk
            </button>
            <button id="nav-training" class="nav-btn flex-1 px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                <i class="fas fa-brain mr-2"></i> Eğitim
            </button>
        </nav>

        <!-- Main Content Area -->
        <main>
            <!-- Welcome Screen (default view) -->
            <section id="welcome-screen" class="block">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="order-2 md:order-1">
                        <h2 class="text-3xl font-bold mb-4">Rüyalarınızı Keşfedin ve Paylaşın</h2>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">
                            DreamSync, rüyalarınızı kaydetmenize, yapay zeka ile analiz etmenize ve benzer rüyalar gören kişilerle paylaşmanıza olanak tanır.
                        </p>
                        <div class="space-y-4">
                            <div class="flex items-start">
                                <div class="bg-dream-primary text-white p-2 rounded-lg mr-3">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold">Rüya Günlüğü</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Rüyalarınızı kaydedin ve zaman içinde izleyin</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-dream-secondary text-white p-2 rounded-lg mr-3">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold">Yapay Zeka Analizi</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Rüyanızın gizli anlamlarını keşfedin</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-dream-accent text-white p-2 rounded-lg mr-3">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold">Topluluk Paylaşımı</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Benzer rüyalar gören kişilerle bağlantı kurun</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-8">
                            <button id="start-button" class="px-6 py-3 bg-dream-gradient hover:opacity-90 text-white font-medium rounded-xl shadow-dream transition-all">
                                <i class="fas fa-plus-circle mr-2"></i> Rüya Ekle
                            </button>
                        </div>
                    </div>
                    <div class="order-1 md:order-2 relative">
                        <div class="absolute inset-0 bg-dream-gradient opacity-10 rounded-3xl filter blur-3xl"></div>
                        <img src="https://i.imgur.com/PZUhNlv.png" alt="Dream Illustration" class="relative z-10 floating mx-auto max-w-full h-auto">
                    </div>
                </div>
                
                <!-- Premium Card -->
                <div class="mt-12 mb-6 bg-gradient-to-r from-dream-primary/10 to-dream-secondary/10 dark:from-dream-primary/20 dark:to-dream-secondary/20 rounded-xl p-6 border border-dream-primary/20 dark:border-dream-primary/30">
                    <div class="flex flex-col md:flex-row md:items-center justify-between">
                        <div class="mb-4 md:mb-0">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-dream-gradient rounded-full flex items-center justify-center text-white mr-3">
                                    <i class="fas fa-star"></i>
                                </div>
                                <h3 class="font-bold text-xl">DreamSync Premium</h3>
                            </div>
                            <p class="mt-2 text-gray-700 dark:text-gray-300">
                                Yapay zeka ile sınırsız rüya analizi için kredi satın alın
                            </p>
                        </div>
                        <div>
                            <button id="buy-credits-btn" class="px-5 py-2.5 bg-dream-gradient text-white rounded-lg shadow-dream hover:opacity-90 transition-all">
                                <i class="fas fa-shopping-cart mr-2"></i> Kredi Satın Al
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Dream Stats Preview -->
                <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="dream-card p-5 rounded-xl">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg mr-4">
                                <i class="fas fa-clipboard-list text-blue-500 dark:text-blue-400"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold">Rüya Kaydı</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Son 7 günde</p>
                            </div>
                        </div>
                        <div class="flex items-end justify-between">
                            <span class="text-3xl font-bold">0</span>
                            <span class="text-green-500 text-sm">
                                <i class="fas fa-arrow-up"></i> Başla
                            </span>
                        </div>
                    </div>
                    
                    <div class="dream-card p-5 rounded-xl">
                        <div class="flex items-center mb-4">
                            <div class="bg-purple-100 dark:bg-purple-900/30 p-3 rounded-lg mr-4">
                                <i class="fas fa-chart-line text-purple-500 dark:text-purple-400"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold">Lucid Rüya</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Başarı oranı</p>
                            </div>
                        </div>
                        <div class="flex items-end justify-between">
                            <span class="text-3xl font-bold">0%</span>
                            <span class="text-blue-500 text-sm">
                                <i class="fas fa-info-circle"></i> Eğitimle arttır
                            </span>
                        </div>
                    </div>
                    
                    <div class="dream-card p-5 rounded-xl">
                        <div class="flex items-center mb-4">
                            <div class="bg-pink-100 dark:bg-pink-900/30 p-3 rounded-lg mr-4">
                                <i class="fas fa-medal text-pink-500 dark:text-pink-400"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold">En Sık Tema</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Rüyalarınızda</p>
                            </div>
                        </div>
                        <div class="flex items-end justify-between">
                            <span class="text-lg font-medium text-gray-500 dark:text-gray-400 italic">Henüz veri yok</span>
                            <span class="text-purple-500 text-sm">
                                <i class="fas fa-magic"></i> Keşfet
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- Featured Section -->
                <div class="mt-16">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <i class="fas fa-star text-yellow-400 mr-3"></i>
                        <span>Topluluk Rüyaları</span>
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <!-- Featured Dream 1 -->
                        <div class="dream-card p-6 rounded-xl">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-bold text-lg">Uçma Deneyimi</h3>
                                <span class="bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs px-2 py-1 rounded-full">
                                    Lucid
                                </span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-4 line-clamp-3">
                                "Rüyamda şehrin üzerinde özgürce uçabiliyordum. Binaların arasından geçerken kanatlarım yoktu ama düşüncelerimle hareket edebiliyordum..."
                            </p>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Anonim kullanıcı</span>
                                <span class="text-gray-500 dark:text-gray-400">12 kişi benzer rüya gördü</span>
                            </div>
                        </div>
                        
                        <!-- Featured Dream 2 -->
                        <div class="dream-card p-6 rounded-xl">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-bold text-lg">Labirent Yolculuğu</h3>
                                <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs px-2 py-1 rounded-full">
                                    Sembolik
                                </span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-4 line-clamp-3">
                                "Sonsuz gibi görünen bir labirentte yolumu bulmaya çalışıyordum. Duvarlar sürekli değişiyor ve döndükçe yeni koridorlar açılıyordu..."
                            </p>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Anonim kullanıcı</span>
                                <span class="text-gray-500 dark:text-gray-400">8 kişi benzer rüya gördü</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button id="explore-community" class="px-5 py-2.5 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-dream-primary dark:text-dream-secondary border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm transition-colors">
                            <i class="fas fa-users mr-2"></i> Daha Fazla Topluluk Rüyası
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Login Screen -->
            <section id="login-screen" class="hidden">
                <div class="max-w-md mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold mb-2">DreamSync'e Hoş Geldiniz</h2>
                            <p class="text-gray-600 dark:text-gray-400">Rüya yolculuğunuza devam etmek için giriş yapın</p>
                        </div>
                        
                        <form id="login-form">
                            <div class="mb-4">
                                <label for="login-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    E-posta
                                </label>
                                <input type="email" id="login-email" placeholder="E-posta adresiniz" 
                                       class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                            </div>
                            
                            <div class="mb-6">
                                <label for="login-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Şifre
                                </label>
                                <div class="relative">
                                    <input type="password" id="login-password" placeholder="Şifreniz" 
                                           class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                    <button type="button" class="toggle-password absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="flex justify-end mt-1">
                                    <a href="#" class="text-xs text-dream-primary dark:text-dream-secondary hover:underline">
                                        Şifremi unuttum
                                    </a>
                                </div>
                            </div>
                            
                            <button type="button" id="login-submit" class="w-full px-4 py-3 bg-dream-gradient hover:opacity-90 text-white font-medium rounded-lg shadow-dream transition-all mb-4">
                                <i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap
                            </button>
                            
                            <p class="text-center text-gray-600 dark:text-gray-400 text-sm">
                                Henüz hesabınız yok mu? 
                                <a href="#" id="switch-to-register" class="text-dream-primary dark:text-dream-secondary hover:underline">
                                    Kayıt ol
                                </a>
                            </p>
                        </form>
                    </div>
                </div>
            </section>
            
            <!-- Register Screen -->
            <section id="register-screen" class="hidden">
                <div class="max-w-md mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold mb-2">DreamSync'e Katılın</h2>
                            <p class="text-gray-600 dark:text-gray-400">Rüya deneyimlerinizi keşfedin ve paylaşın</p>
                        </div>
                        
                        <form id="register-form">
                            <div class="mb-4">
                                <label for="register-username" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Kullanıcı Adı
                                </label>
                                <input type="text" id="register-username" placeholder="Kullanıcı adınız" 
                                       class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                            </div>
                            
                            <div class="mb-4">
                                <label for="register-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    E-posta
                                </label>
                                <input type="email" id="register-email" placeholder="E-posta adresiniz" 
                                       class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                            </div>
                            
                            <div class="mb-4">
                                <label for="register-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Şifre
                                </label>
                                <div class="relative">
                                    <input type="password" id="register-password" placeholder="Şifreniz" 
                                           class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                    <button type="button" class="toggle-password absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <label for="register-password-confirm" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Şifre Tekrar
                                </label>
                                <div class="relative">
                                    <input type="password" id="register-password-confirm" placeholder="Şifrenizi tekrar girin" 
                                           class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                    <button type="button" class="toggle-password absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <label class="flex items-center">
                                    <input type="checkbox" id="terms-checkbox" class="form-checkbox text-dream-primary mr-2">
                                    <span class="text-sm text-gray-700 dark:text-gray-300">
                                        <a href="#" class="text-dream-primary dark:text-dream-secondary hover:underline">Kullanım Koşulları</a> ve <a href="#" class="text-dream-primary dark:text-dream-secondary hover:underline">Gizlilik Politikası</a>'nı kabul ediyorum
                                    </span>
                                </label>
                            </div>
                            
                            <button type="button" id="register-submit" class="w-full px-4 py-3 bg-dream-gradient hover:opacity-90 text-white font-medium rounded-lg shadow-dream transition-all mb-4">
                                <i class="fas fa-user-plus mr-2"></i> Kayıt Ol
                            </button>
                            
                            <p class="text-center text-gray-600 dark:text-gray-400 text-sm">
                                Zaten hesabınız var mı? 
                                <a href="#" id="switch-to-login" class="text-dream-primary dark:text-dream-secondary hover:underline">
                                    Giriş yap
                                </a>
                            </p>
                        </form>
                    </div>
                </div>
            </section>
            
            <!-- Pricing/Credits Screen -->
            <section id="credits-screen" class="hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-2">Kredi Satın Al</h2>
                    <p class="text-gray-600 dark:text-gray-400">
                        Daha fazla rüya tahlili için kredi satın alın. Her kredi bir rüya analizi için kullanılabilir.
                    </p>
                </div>
                
                <div id="credit-balance" class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm mb-8 border border-gray-200 dark:border-gray-700">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-dream-gradient rounded-full flex items-center justify-center text-white mr-4">
                                <i class="fas fa-star"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Mevcut Krediniz</p>
                                <p class="text-3xl font-bold"><span id="current-credits">3</span> kredi</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-gray-600 dark:text-gray-400">Kredi ile yapabilecekleriniz:</p>
                            <ul class="text-sm mt-1">
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-500 mr-1.5"></i> Rüya analizi
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-500 mr-1.5"></i> Sembol anlamları
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-500 mr-1.5"></i> Detaylı yorumlar
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Credit Pack 1 -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">Başlangıç Paketi</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-6">Rüya yorumlama deneyimi için ideal</p>
                            
                            <div class="flex items-baseline mb-6">
                                <span class="text-3xl font-bold">$4.99</span>
                                <span class="text-gray-500 dark:text-gray-400 ml-1">bir kerelik</span>
                            </div>
                            
                            <ul class="space-y-3 mb-6">
                                <li class="flex items-start">
                                    <i class="fas fa-star text-dream-primary dark:text-dream-secondary mt-0.5 mr-3"></i>
                                    <span>30 kredi</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>30 rüya analizi</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>Sınırsız rüya kaydı</span>
                                </li>
                            </ul>
                            
                            <button class="buy-credit-btn w-full py-2.5 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors" data-credits="30" data-price="4.99">
                                Satın Al
                            </button>
                        </div>
                    </div>
                    
                    <!-- Credit Pack 2 -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-shadow border border-dream-primary/50 dark:border-dream-secondary/50 overflow-hidden relative">
                        <div class="absolute top-0 right-0 bg-dream-primary text-white text-xs font-bold px-3 py-1 uppercase">
                            En Popüler
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">Standart Paket</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-6">Düzenli kullanıcılar için en iyi değer</p>
                            
                            <div class="flex items-baseline mb-6">
                                <span class="text-3xl font-bold">$7.49</span>
                                <span class="text-gray-500 dark:text-gray-400 ml-1">bir kerelik</span>
                            </div>
                            
                            <ul class="space-y-3 mb-6">
                                <li class="flex items-start">
                                    <i class="fas fa-star text-dream-primary dark:text-dream-secondary mt-0.5 mr-3"></i>
                                    <span>50 kredi</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>50 rüya analizi</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>Sınırsız rüya kaydı</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>Toplulukla paylaşım</span>
                                </li>
                            </ul>
                            
                            <button class="buy-credit-btn w-full py-2.5 bg-dream-gradient hover:opacity-90 text-white rounded-lg shadow-dream transition-all" data-credits="50" data-price="7.49">
                                Satın Al
                            </button>
                        </div>
                    </div>
                    
                    <!-- Credit Pack 3 -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">Premium Paket</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-6">Yoğun kullanım için en ekonomik</p>
                            
                            <div class="flex items-baseline mb-6">
                                <span class="text-3xl font-bold">$12.49</span>
                                <span class="text-gray-500 dark:text-gray-400 ml-1">bir kerelik</span>
                            </div>
                            
                            <ul class="space-y-3 mb-6">
                                <li class="flex items-start">
                                    <i class="fas fa-star text-dream-primary dark:text-dream-secondary mt-0.5 mr-3"></i>
                                    <span>100 kredi</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>100 rüya analizi</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>Sınırsız rüya kaydı</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-0.5 mr-3"></i>
                                    <span>Öncelikli analiz</span>
                                </li>
                            </ul>
                            
                            <button class="buy-credit-btn w-full py-2.5 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors" data-credits="100" data-price="12.49">
                                Satın Al
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- FAQ -->
                <div class="mt-12">
                    <h3 class="text-xl font-bold mb-6">Sıkça Sorulan Sorular</h3>
                    
                    <div class="space-y-4">
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <button class="faq-toggle flex justify-between items-center w-full text-left">
                                <span class="font-medium">Krediler ne zaman sona erer?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-content hidden mt-2 text-gray-600 dark:text-gray-400 text-sm">
                                Satın aldığınız krediler süresizdir ve kullanılıncaya kadar hesabınızda kalır.
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <button class="faq-toggle flex justify-between items-center w-full text-left">
                                <span class="font-medium">Kredi satın alımı nasıl çalışır?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-content hidden mt-2 text-gray-600 dark:text-gray-400 text-sm">
                                Kredi satın alımı tek seferlik bir ödemedir. Seçtiğiniz paketi satın aldıktan sonra krediler anında hesabınıza eklenir.
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <button class="faq-toggle flex justify-between items-center w-full text-left">
                                <span class="font-medium">Kredilerimi iade edebilir miyim?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-content hidden mt-2 text-gray-600 dark:text-gray-400 text-sm">
                                Satın alınan krediler için iade yapılmamaktadır. Ancak bir sorun yaşarsanız destek ekibimizle iletişime geçebilirsiniz.
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <button class="faq-toggle flex justify-between items-center w-full text-left">
                                <span class="font-medium">Rüya analizi için kaç kredi kullanılır?</span>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                            </button>
                            <div class="faq-content hidden mt-2 text-gray-600 dark:text-gray-400 text-sm">
                                Her rüya analizi için 1 kredi kullanılır. Analizler yapay zeka ile gerçekleştirilir ve rüyanızın detaylı yorumunu içerir.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- User Account Screen -->
            <section id="account-screen" class="hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-2">Hesap Bilgilerim</h2>
                    <p class="text-gray-600 dark:text-gray-400">
                        Hesap bilgilerinizi görüntüleyin ve düzenleyin
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- User Profile Card -->
                    <div class="md:col-span-1">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
                            <div class="flex flex-col items-center">
                                <div class="w-24 h-24 bg-dream-gradient rounded-full flex items-center justify-center text-white text-3xl mb-4">
                                    <span id="account-user-initial">K</span>
                                </div>
                                <h3 id="account-username" class="text-xl font-bold mb-1">KullanıcıAdı</h3>
                                <p id="account-email" class="text-gray-500 dark:text-gray-400 text-sm mb-4">kullanici@mail.com</p>
                                
                                <div class="flex items-center bg-dream-primary/10 dark:bg-dream-primary/20 text-dream-primary dark:text-dream-secondary px-3 py-1.5 rounded-full mb-4">
                                    <i class="fas fa-star mr-2"></i>
                                    <span id="account-credits">3</span> <span class="ml-1 text-xs">kredi</span>
                                </div>
                                
                                <button id="account-edit-profile-btn" class="w-full px-4 py-2 mt-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                                    <i class="fas fa-edit mr-2"></i> Profili Düzenle
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Account Settings -->
                    <div class="md:col-span-2">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
                            <h3 class="text-lg font-semibold mb-4">Hesap Ayarları</h3>
                            
                            <div class="space-y-6">
                                <!-- Personal Information -->
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-3">Kişisel Bilgiler</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label for="account-fullname" class="block text-sm text-gray-600 dark:text-gray-400 mb-1">
                                                Ad Soyad
                                            </label>
                                            <input type="text" id="account-fullname" placeholder="Ad Soyad" 
                                                   class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                        </div>
                                        <div>
                                            <label for="account-update-email" class="block text-sm text-gray-600 dark:text-gray-400 mb-1">
                                                E-posta
                                            </label>
                                            <input type="email" id="account-update-email" placeholder="E-posta adresiniz" 
                                                   class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Password Update -->
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-3">Şifre Değiştir</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label for="account-current-password" class="block text-sm text-gray-600 dark:text-gray-400 mb-1">
                                                Mevcut Şifre
                                            </label>
                                            <input type="password" id="account-current-password" placeholder="Mevcut şifreniz" 
                                                   class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                        </div>
                                        <div>
                                            <label for="account-new-password" class="block text-sm text-gray-600 dark:text-gray-400 mb-1">
                                                Yeni Şifre
                                            </label>
                                            <input type="password" id="account-new-password" placeholder="Yeni şifreniz" 
                                                   class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Notification Settings -->
                                <div>
                                    <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider mb-3">Bildirim Ayarları</h4>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-gray-700 dark:text-gray-300">E-posta Bildirimleri</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Yeni özellikler ve güncellemeler hakkında bilgi alın</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" class="sr-only peer" checked>
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-dream-primary"></div>
                                            </label>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-gray-700 dark:text-gray-300">Rüya Hatırlatıcıları</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Rüyalarınızı kaydetmeniz için hatırlatıcılar alın</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" class="sr-only peer">
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-dream-primary"></div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <button id="account-save-changes" class="px-4 py-2 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors">
                                    Değişiklikleri Kaydet
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Subscription History -->
                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4">Kredi Geçmişi</h3>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-200 dark:border-gray-700">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            Tarih
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            İşlem
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            Miktar
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                            Toplam
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700" id="credit-history">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                                            12 Haziran 2023
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400">
                                                Kaydolma Bonusu
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                                            +3 kredi
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                                            3 kredi
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Dream Journal Section -->
            <section id="journal-screen" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Rüya Günlüğüm</h2>
                    <button id="add-dream-btn" class="px-4 py-2 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors">
                        <i class="fas fa-plus mr-2"></i> Yeni Rüya
                    </button>
                </div>
                
                <div id="dreams-container" class="grid grid-cols-1 gap-6">
                    <!-- Empty state -->
                    <div id="empty-journal" class="dream-card p-8 rounded-xl text-center">
                        <div class="w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center">
                            <i class="fas fa-book text-gray-400 dark:text-gray-500 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Rüya günlüğünüz boş</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">Rüyalarınızı kaydetmeye başlayın ve zamanla içgörüler kazanın.</p>
                        <button id="empty-add-btn" class="px-5 py-2.5 bg-dream-gradient text-white rounded-lg shadow-dream hover:opacity-90 transition-all">
                            <i class="fas fa-plus-circle mr-2"></i> İlk Rüyanızı Ekleyin
                        </button>
                    </div>
                    
                    <!-- Dream entries will be inserted here dynamically -->
                </div>
            </section>
            
            <!-- Community Section -->
            <section id="community-screen" class="hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-2">Rüya Topluluğu</h2>
                    <p class="text-gray-600 dark:text-gray-400">
                        Diğer insanların rüyalarını keşfedin ve kendi deneyimlerinizi paylaşın.
                    </p>
                </div>
                
                <!-- Not logged in state -->
                <div id="community-login-required" class="bg-white dark:bg-gray-800 p-8 rounded-xl text-center border border-gray-200 dark:border-gray-700 mb-8">
                    <div class="w-20 h-20 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                        <i class="fas fa-users text-gray-400 dark:text-gray-500 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Topluluk özelliklerine erişmek için giriş yapın</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-6">Rüyalarınızı paylaşmak ve diğer kullanıcıların rüyalarını görmek için hesabınıza giriş yapın.</p>
                    <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 justify-center">
                        <button id="community-login-btn" class="px-5 py-2.5 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors">
                            <i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap
                        </button>
                        <button id="community-register-btn" class="px-5 py-2.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                            <i class="fas fa-user-plus mr-2"></i> Kayıt Ol
                        </button>
                    </div>
                </div>
                
                <!-- Logged in state -->
                <div id="community-share-container" class="hidden">
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-xl mb-8 border border-gray-200 dark:border-gray-700">
                        <div class="flex items-center mb-4">
                            <div class="w-10 h-10 bg-dream-gradient rounded-full flex items-center justify-center text-white mr-3">
                                <i class="fas fa-share-alt"></i>
                            </div>
                            <h3 class="font-semibold">Rüyanızı Toplulukla Paylaşın</h3>
                        </div>
                        
                        <div id="share-container">
                            <select id="share-dream-select" class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 mb-4 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                <option value="" disabled selected>Paylaşmak istediğiniz rüyayı seçin...</option>
                            </select>
                            
                            <div class="mb-3">
                                <label class="flex items-center">
                                    <input type="radio" name="share-option" value="anonymous" class="form-radio text-dream-primary mr-2" checked>
                                    <span class="text-sm">Anonim olarak paylaş</span>
                                </label>
                                <label class="flex items-center mt-2">
                                    <input type="radio" name="share-option" value="named" class="form-radio text-dream-primary mr-2">
                                    <span class="text-sm">İsminizle paylaş (<span id="share-username" class="font-medium">KullanıcıAdı</span>)</span>
                                </label>
                            </div>
                            
                            <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                                <button id="share-dream-btn" class="px-4 py-2.5 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors md:flex-1 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fas fa-share-alt mr-2"></i> Rüyayı Paylaş
                                </button>
                                <button id="share-matching-btn" class="px-4 py-2.5 bg-dream-secondary hover:bg-dream-secondary/90 text-white rounded-lg transition-colors md:flex-1 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fas fa-link mr-2"></i> Benzer Rüyalar İçin Paylaş
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Community dreams (visible to all) -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-semibold text-lg">Topluluk Rüyaları</h3>
                        <div class="flex space-x-2">
                            <select id="dream-filter" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                                <option value="all">Tüm Rüyalar</option>
                                <option value="lucid">Lucid Rüyalar</option>
                                <option value="recurring">Tekrarlayan Rüyalar</option>
                                <option value="nightmare">Kabuslar</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="community-dreams" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Dream 1 -->
                        <div class="dream-card p-6 rounded-xl">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-bold text-lg">Uçma Deneyimi</h3>
                                <span class="bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs px-2 py-1 rounded-full">
                                    Lucid
                                </span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">
                                "Rüyamda şehrin üzerinde özgürce uçabiliyordum. Binaların arasından geçerken kanatlarım yoktu ama düşüncelerimle hareket edebiliyordum. Yüksekten şehri izlemek müthiş bir duyguydu. Bir noktada rüyada olduğumu fark ettim ve daha yükseğe çıkmayı denedim."
                            </p>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Mehmet Yılmaz</span>
                                <button class="comment-btn text-dream-primary dark:text-dream-secondary hover:underline" data-dream-id="1">
                                    <i class="fas fa-comment mr-1"></i> Yorum Yap
                                </button>
                            </div>
                            
                            <!-- Comments Section (Initially Hidden) -->
                            <div class="dream-comments hidden mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                                <div class="space-y-3">
                                    <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                        <div class="flex justify-between items-start mb-1">
                                            <span class="font-medium text-sm">Anonim kullanıcı</span>
                                            <span class="text-xs text-gray-500">2 gün önce</span>
                                        </div>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">Ben de bu tarz rüyalar görüyorum. Özellikle stresli dönemlerde uçma rüyası görmek çok rahatlatıyor.</p>
                                    </div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                        <div class="flex justify-between items-start mb-1">
                                            <span class="font-medium text-sm">Zeynep Kaya</span>
                                            <span class="text-xs text-gray-500">1 gün önce</span>
                                        </div>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">Uçma rüyaları genelde özgürlük arayışını simgeliyor. Hayatınızda bazı kısıtlamalardan kurtulmak istediğinizi düşünüyor musunuz?</p>
                                    </div>
                                </div>
                                
                                <!-- Add Comment Form -->
                                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                                    <textarea class="comment-input w-full p-2 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg" placeholder="Yorumunuzu yazın..."></textarea>
                                    <div class="flex justify-between mt-2">
                                        <div class="flex items-center">
                                            <label class="inline-flex items-center text-sm">
                                                <input type="checkbox" class="comment-anonymous form-checkbox text-dream-primary mr-2">
                                                <span>Anonim olarak yorum yap</span>
                                            </label>
                                        </div>
                                        <button class="post-comment-btn px-3 py-1 text-sm bg-dream-primary text-white rounded-lg hover:bg-dream-primary/90">
                                            Gönder
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Dream 2 -->
                        <div class="dream-card p-6 rounded-xl">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-bold text-lg">Labirent Yolculuğu</h3>
                                <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs px-2 py-1 rounded-full">
                                    Sembolik
                                </span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">
                                "Sonsuz gibi görünen bir labirentte yolumu bulmaya çalışıyordum. Duvarlar sürekli değişiyor ve döndükçe yeni koridorlar açılıyordu. Gergin hissediyordum ama aynı zamanda merak da vardı. Sonunda labirentin merkezinde bir ayna buldum ve aynada kendimi çocuk olarak gördüm."
                            </p>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Anonim kullanıcı</span>
                                <button class="comment-btn text-dream-primary dark:text-dream-secondary hover:underline" data-dream-id="2">
                                    <i class="fas fa-comment mr-1"></i> Yorum Yap
                                </button>
                            </div>
                            
                            <!-- Comments Section (Initially Hidden) -->
                            <div class="dream-comments hidden mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                                <div class="space-y-3">
                                    <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">
                                        <div class="flex justify-between items-start mb-1">
                                            <span class="font-medium text-sm">Ahmet Demir</span>
                                            <span class="text-xs text-gray-500">3 gün önce</span>
                                        </div>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">Labirentler genellikle karar verme zorlukları ve hayat yolculuğumuzdaki karmaşayı temsil eder. Aynada çocukluk halini görmek ise içindeki çocuğa dönme arzusu olabilir.</p>
                                    </div>
                                </div>
                                
                                <!-- Add Comment Form -->
                                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                                    <textarea class="comment-input w-full p-2 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg" placeholder="Yorumunuzu yazın..."></textarea>
                                    <div class="flex justify-between mt-2">
                                        <div class="flex items-center">
                                            <label class="inline-flex items-center text-sm">
                                                <input type="checkbox" class="comment-anonymous form-checkbox text-dream-primary mr-2">
                                                <span>Anonim olarak yorum yap</span>
                                            </label>
                                        </div>
                                        <button class="post-comment-btn px-3 py-1 text-sm bg-dream-primary text-white rounded-lg hover:bg-dream-primary/90">
                                            Gönder
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Dream 3 -->
                        <div class="dream-card p-6 rounded-xl">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-bold text-lg">Eski Ev</h3>
                                <span class="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 text-xs px-2 py-1 rounded-full">
                                    Tekrarlayan
                                </span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">
                                "Çocukluğumun geçtiği evdeydim ama ev tanıdık olsa da farklıydı. Ekstra odalar ve gizli geçitler vardı. Hiç girmediğim bir odayı keşfetmeye çalışıyordum ama kapı kilitliydi. Bu rüyayı daha önce birkaç kez gördüm ve her seferinde yeni bir detay fark ediyorum."
                            </p>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Anonim kullanıcı</span>
                                <button class="comment-btn text-dream-primary dark:text-dream-secondary hover:underline" data-dream-id="3">
                                    <i class="fas fa-comment mr-1"></i> Yorum Yap
                                </button>
                            </div>
                            
                            <!-- Comments Section (Initially Hidden) -->
                            <div class="dream-comments hidden mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                                <!-- Add Comment Form -->
                                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                                    <textarea class="comment-input w-full p-2 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg" placeholder="Yorumunuzu yazın..."></textarea>
                                    <div class="flex justify-between mt-2">
                                        <div class="flex items-center">
                                            <label class="inline-flex items-center text-sm">
                                                <input type="checkbox" class="comment-anonymous form-checkbox text-dream-primary mr-2">
                                                <span>Anonim olarak yorum yap</span>
                                            </label>
                                        </div>
                                        <button class="post-comment-btn px-3 py-1 text-sm bg-dream-primary text-white rounded-lg hover:bg-dream-primary/90">
                                            Gönder
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Dream 4 -->
                        <div class="dream-card p-6 rounded-xl">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-bold text-lg">Takip Edilme Hissi</h3>
                                <span class="bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs px-2 py-1 rounded-full">
                                    Kabus
                                </span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">
                                "Karanlık ve sisli bir sokakta yürüyordum. Arkamdan birinin beni takip ettiğini hissediyordum ama ne zaman arkama dönsem kimseyi göremiyordum. Sesler duyuyordum ve adımlar gittikçe hızlanıyordu. Koşmaya başladım ama bir türlü hızlanamıyordum, sanki suda yürür gibiydim."
                            </p>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Anonim kullanıcı</span>
                                <button class="comment-btn text-dream-primary dark:text-dream-secondary hover:underline" data-dream-id="4">
                                    <i class="fas fa-comment mr-1"></i> Yorum Yap
                                </button>
                            </div>
                            
                            <!-- Comments Section (Initially Hidden) -->
                            <div class="dream-comments hidden mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                                <!-- Add Comment Form -->
                                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                                    <textarea class="comment-input w-full p-2 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg" placeholder="Yorumunuzu yazın..."></textarea>
                                    <div class="flex justify-between mt-2">
                                        <div class="flex items-center">
                                            <label class="inline-flex items-center text-sm">
                                                <input type="checkbox" class="comment-anonymous form-checkbox text-dream-primary mr-2">
                                                <span>Anonim olarak yorum yap</span>
                                            </label>
                                        </div>
                                        <button class="post-comment-btn px-3 py-1 text-sm bg-dream-primary text-white rounded-lg hover:bg-dream-primary/90">
                                            Gönder
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button class="px-5 py-2.5 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-dream-primary dark:text-dream-secondary border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm transition-colors">
                            <i class="fas fa-sync mr-2"></i> Daha Fazla Göster
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Training Section -->
            <section id="training-screen" class="hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-2">Lucid Dreaming Eğitimi</h2>
                    <p class="text-gray-600 dark:text-gray-400">
                        Rüyalarınızı kontrol etmeyi öğrenin ve bilinçli rüya (lucid dreaming) deneyimini yaşayın.
                    </p>
                </div>
                
                <!-- Progress Tracker -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 mb-8">
                    <h3 class="font-semibold mb-4">Eğitim İlerlemeniz</h3>
                    <div class="mb-3">
                        <div class="flex justify-between mb-1 text-sm">
                            <span>Başlangıç</span>
                            <span>İleri Seviye</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                            <div class="bg-dream-gradient w-[5%] h-2.5 rounded-full"></div>
                        </div>
                    </div>
                    <div class="flex justify-between text-sm text-gray-500 dark:text-gray-400">
                        <span>Tamamlanan: 0/7 teknik</span>
                        <span>Lucid rüya olasılığı: Düşük</span>
                    </div>
                </div>
                
                <!-- Techniques -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- Technique 1 -->
                    <div class="dream-card p-6 rounded-xl">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-lg">Gerçeklik Kontrolleri</h3>
                            <span class="bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs px-2 py-1 rounded-full">
                                Temel Seviye
                            </span>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">
                            Gün içinde düzenli olarak gerçeklik kontrolü yapmak, rüyalarınızda da bu alışkanlığı sürdürmenizi sağlar. Bu, rüyada olduğunuzu fark etmenin en etkili yollarından biridir.
                        </p>
                        <div class="flex space-x-2">
                            <button class="px-4 py-2 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors flex-1">
                                <i class="fas fa-play mr-2"></i> Başla
                            </button>
                        </div>
                    </div>
                    
                    <!-- Technique 2 -->
                    <div class="dream-card p-6 rounded-xl">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-lg">Rüya Günlüğü Tutma</h3>
                            <span class="bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs px-2 py-1 rounded-full">
                                Temel Seviye
                            </span>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">
                            Rüyalarınızı düzenli olarak kaydetmek, rüya hatırlama yeteneğinizi geliştirir ve rüya işaretlerinizi tanımanıza yardımcı olur.
                        </p>
                        <div class="flex space-x-2">
                            <button class="px-4 py-2 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors flex-1">
                                <i class="fas fa-play mr-2"></i> Başla
                            </button>
                        </div>
                    </div>
                    
                    <!-- Technique 3 -->
                    <div class="dream-card p-6 rounded-xl opacity-75">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-lg">MILD Tekniği</h3>
                            <span class="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 text-xs px-2 py-1 rounded-full">
                                Orta Seviye
                            </span>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">
                            Mnemonik Induced Lucid Dreaming (MILD) tekniği, uyumadan önce kendinizi rüyada olduğunuzu fark etmeye programladığınız bir yöntemdir.
                        </p>
                        <div class="flex space-x-2">
                            <button class="px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg cursor-not-allowed flex-1">
                                <i class="fas fa-lock mr-2"></i> Kilidi Aç (Temel Seviyeyi Tamamla)
                            </button>
                        </div>
                    </div>
                    
                    <!-- Technique 4 -->
                    <div class="dream-card p-6 rounded-xl opacity-75">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-lg">WBTB Tekniği</h3>
                            <span class="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 text-xs px-2 py-1 rounded-full">
                                Orta Seviye
                            </span>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">
                            Wake Back To Bed (WBTB) tekniği, REM uykusu sırasında kısa süreliğine uyanıp tekrar uyumayı içerir ve lucid rüya olasılığını artırır.
                        </p>
                        <div class="flex space-x-2">
                            <button class="px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg cursor-not-allowed flex-1">
                                <i class="fas fa-lock mr-2"></i> Kilidi Aç (Temel Seviyeyi Tamamla)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tips & Resources -->
                <div>
                    <h3 class="font-semibold text-lg mb-4">Faydalı Kaynaklar</h3>
                    <div class="grid grid-cols-1 gap-4">
                        <div class="flex bg-white dark:bg-gray-800 p-4 rounded-xl items-center">
                            <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-book text-indigo-600 dark:text-indigo-400"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium">Lucid Rüya Görme Rehberi</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Başlangıç seviyesinden ileri seviyeye kapsamlı rehber</p>
                            </div>
                            <button class="px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-lg text-sm hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        
                        <div class="flex bg-white dark:bg-gray-800 p-4 rounded-xl items-center">
                            <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-video text-blue-600 dark:text-blue-400"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium">Rehberli Meditasyon</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Lucid rüya görmeyi kolaylaştıran meditasyon teknikleri</p>
                            </div>
                            <button class="px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        
                        <div class="flex bg-white dark:bg-gray-800 p-4 rounded-xl items-center">
                            <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-comments text-purple-600 dark:text-purple-400"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium">Topluluk Forumu</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Diğer lucid rüya görücülerle deneyimlerinizi paylaşın</p>
                            </div>
                            <button class="px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded-lg text-sm hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Dream Entry Form -->
            <section id="dream-form" class="hidden">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Yeni Rüya Ekle</h2>
                        <button id="close-form-btn" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <form id="new-dream-form">
                        <div class="mb-4">
                            <label for="dream-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Rüya Başlığı
                            </label>
                            <input type="text" id="dream-title" placeholder="Rüyanız için kısa bir başlık..." 
                                   class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                        </div>
                        
                        <div class="mb-4">
                            <label for="dream-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Rüya Tarihi
                            </label>
                            <input type="date" id="dream-date" 
                                   class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary">
                        </div>
                        
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-1">
                                <label for="dream-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                    Rüya Açıklaması
                                </label>
                                <div class="flex space-x-2">
                                    <button type="button" id="text-entry-btn" class="px-2 py-1 bg-dream-primary text-white text-xs rounded">
                                        <i class="fas fa-keyboard mr-1"></i> Yazı
                                    </button>
                                    <button type="button" id="voice-entry-btn" class="px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded">
                                        <i class="fas fa-microphone mr-1"></i> Ses
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Text entry area -->
                            <div id="text-entry-area">
                                <textarea id="dream-description" rows="6" placeholder="Rüyanızı olabildiğince detaylı bir şekilde anlatın..."
                                          class="w-full bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-dream-primary dark:focus:ring-dream-secondary resize-none"></textarea>
                            </div>
                            
                            <!-- Voice entry area (hidden by default) -->
                            <div id="voice-entry-area" class="hidden">
                                <div class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4 flex flex-col items-center justify-center" style="min-height: 150px;">
                                    <div id="record-btn" class="w-16 h-16 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-full flex items-center justify-center cursor-pointer mb-3 transition-colors">
                                        <i class="fas fa-microphone text-red-500 dark:text-red-400 text-xl"></i>
                                    </div>
                                    <p id="recording-status" class="text-sm text-gray-600 dark:text-gray-400">
                                        Kayıt için tıklayın
                                    </p>
                                    <div id="voice-controls" class="mt-3 hidden">
                                        <div class="flex items-center justify-center space-x-3">
                                            <button type="button" id="stop-recording-btn" class="px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm">
                                                <i class="fas fa-stop mr-1"></i> Durdur
                                            </button>
                                            <button type="button" id="cancel-recording-btn" class="px-3 py-1.5 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded-lg text-sm">
                                                <i class="fas fa-times mr-1"></i> İptal
                                            </button>
                                        </div>
                                    </div>
                                    <div id="recording-result" class="mt-3 w-full hidden">
                                        <div class="relative">
                                            <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 w-full">
                                                <p id="voice-to-text" class="text-sm text-gray-700 dark:text-gray-300">
                                                    [Ses verisi burada gösterilecek]
                                                </p>
                                            </div>
                                            <button type="button" id="use-text-btn" class="absolute -top-2 -right-2 bg-dream-primary text-white w-6 h-6 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-xs"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Rüya Türü
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <label class="inline-flex items-center px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                        <input type="checkbox" name="dream-type" value="lucid" class="form-checkbox text-dream-primary mr-2">
                                        <span>Lucid</span>
                                    </label>
                                    <label class="inline-flex items-center px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                        <input type="checkbox" name="dream-type" value="recurring" class="form-checkbox text-dream-primary mr-2">
                                        <span>Tekrarlayan</span>
                                    </label>
                                    <label class="inline-flex items-center px-3 py-1.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                        <input type="checkbox" name="dream-type" value="nightmare" class="form-checkbox text-dream-primary mr-2">
                                        <span>Kabus</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <label for="dream-clarity" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    Rüya Netliği
                                </label>
                                <div>
                                    <input type="range" min="1" max="5" value="3" id="dream-clarity" 
                                           class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none">
                                    <div class="flex justify-between text-xs text-gray-600 dark:text-gray-400 mt-1">
                                        <span>Bulanık</span>
                                        <span>Çok Net</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
                            <button type="button" id="save-dream-btn" class="px-5 py-2.5 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg shadow-sm transition-colors md:flex-1">
                                <i class="fas fa-save mr-2"></i> Rüyayı Kaydet
                            </button>
                            <button type="button" id="analyze-dream-btn" class="px-5 py-2.5 bg-dream-gradient hover:opacity-90 text-white rounded-lg shadow-dream transition-all md:flex-1">
                                <i class="fas fa-robot mr-2"></i> Yapay Zeka ile Analiz Et
                                <span class="ml-1 text-xs">(1 kredi)</span>
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            
            <!-- Dream Detail View -->
            <section id="dream-detail" class="hidden">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6">
                    <div class="flex justify-between items-center mb-6">
                        <div class="flex items-center">
                            <button id="back-to-journal-btn" class="mr-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <h2 id="detail-title" class="text-2xl font-bold">Rüya Detayı</h2>
                        </div>
                        <div class="flex space-x-2">
                            <button id="edit-dream-btn" class="text-dream-primary dark:text-dream-secondary hover:text-dream-primary/80 dark:hover:text-dream-secondary/80">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button id="delete-dream-btn" class="text-red-500 hover:text-red-600">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span id="detail-date" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
                                <i class="fas fa-calendar-alt mr-1.5"></i> 12 Haziran 2023
                            </span>
                            <span id="detail-type" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300">
                                <i class="fas fa-moon mr-1.5"></i> Lucid Rüya
                            </span>
                            <span id="detail-clarity" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                                <i class="fas fa-eye mr-1.5"></i> Netlik: Yüksek
                            </span>
                        </div>
                        
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-5 mb-6">
                            <p id="detail-description" class="text-gray-700 dark:text-gray-300 whitespace-pre-line">
                                Rüya açıklaması burada görünecek...
                            </p>
                        </div>
                    </div>
                    
                    <!-- AI Analysis -->
                    <div id="dream-analysis" class="hidden">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-robot text-dream-primary mr-2"></i> Yapay Zeka Analizi
                        </h3>
                        
                        <div class="bg-dream-primary/5 dark:bg-dream-primary/10 rounded-lg p-5 border border-dream-primary/20 dark:border-dream-primary/30">
                            <div id="analysis-content" class="text-gray-700 dark:text-gray-300">
                                <!-- AI Analysis will be loaded here -->
                                <div class="animate-pulse">
                                    <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded-full w-3/4 mb-3"></div>
                                    <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded-full mb-3"></div>
                                    <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded-full w-5/6 mb-3"></div>
                                    <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded-full w-1/2 mb-3"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                                <h4 class="font-medium mb-2 text-sm uppercase text-gray-500 dark:text-gray-400">Ana Temalar</h4>
                                <div id="analysis-themes" class="flex flex-wrap gap-2">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                                        Özgürlük
                                    </span>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                        Keşif
                                    </span>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300">
                                        Dönüşüm
                                    </span>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                                <h4 class="font-medium mb-2 text-sm uppercase text-gray-500 dark:text-gray-400">Duygular</h4>
                                <div id="analysis-emotions" class="flex flex-wrap gap-2">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300">
                                        Heyecan
                                    </span>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-pink-100 dark:bg-pink-900/30 text-pink-800 dark:text-pink-300">
                                        Merak
                                    </span>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                                <h4 class="font-medium mb-2 text-sm uppercase text-gray-500 dark:text-gray-400">Semboller</h4>
                                <div id="analysis-symbols" class="flex flex-wrap gap-2">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300">
                                        Gökyüzü
                                    </span>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-teal-100 dark:bg-teal-900/30 text-teal-800 dark:text-teal-300">
                                        Uçmak
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- No Analysis (Not Logged In) -->
                    <div id="no-analysis-login" class="mt-6 hidden">
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-6 text-center">
                            <div class="w-16 h-16 mx-auto mb-4 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold mb-2">Rüya analizi için giriş yapın</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">Yapay zeka ile rüyanızın anlamını keşfetmek için hesabınıza giriş yapın.</p>
                            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 justify-center">
                                <button id="analysis-login-btn" class="px-4 py-2 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors">
                                    <i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap
                                </button>
                                <button id="analysis-register-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                                    <i class="fas fa-user-plus mr-2"></i> Kayıt Ol
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- No Analysis (No Credits) -->
                    <div id="no-analysis-credits" class="mt-6 hidden">
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-6 text-center">
                            <div class="w-16 h-16 mx-auto mb-4 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold mb-2">Yeterli krediniz yok</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">Rüya analizi için 1 krediye ihtiyacınız var. Daha fazla rüya yorumlamak için kredi satın alın.</p>
                            <button id="buy-credits-for-analysis" class="px-4 py-2 bg-dream-gradient hover:opacity-90 text-white rounded-lg shadow-dream transition-all">
                                <i class="fas fa-shopping-cart mr-2"></i> Kredi Satın Al
                            </button>
                        </div>
                    </div>
                    
                    <!-- No Analysis (Regular State) -->
                    <div id="no-analysis" class="mt-6 hidden">
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-6 text-center">
                            <div class="w-16 h-16 mx-auto mb-4 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold mb-2">Bu rüya henüz analiz edilmedi</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">Yapay zeka ile rüyanızın anlamını keşfedin.</p>
                            <button id="detail-analyze-btn" class="px-4 py-2 bg-dream-gradient hover:opacity-90 text-white rounded-lg shadow-dream transition-all">
                                <i class="fas fa-magic mr-2"></i> Şimdi Analiz Et <span class="text-xs">(1 kredi)</span>
                            </button>
                        </div>
                    </div>
                    
                    <div id="analysis-loading" class="hidden mt-6">
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-6">
                            <div class="flex items-center justify-center space-x-4">
                                <div class="w-10 h-10 border-4 border-dream-primary border-t-transparent rounded-full animate-spin"></div>
                                <p class="text-gray-700 dark:text-gray-300">Yapay zeka rüyanızı analiz ediyor...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Credit Purchase Confirmation Modal -->
            <div id="purchase-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-dream-gradient rounded-full flex items-center justify-center text-white mx-auto mb-4">
                            <i class="fas fa-shopping-cart text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Kredi Satın Al</h3>
                        <p class="text-gray-600 dark:text-gray-400" id="purchase-info">30 kredi satın almak üzeresiniz.</p>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6">
                        <div class="flex justify-between items-center">
                            <span>Ücret:</span>
                            <span class="font-bold" id="purchase-price">$4.99</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <button id="cancel-purchase" class="px-4 py-2.5 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                            İptal
                        </button>
                        <button id="confirm-purchase" class="px-4 py-2.5 bg-dream-gradient hover:opacity-90 text-white rounded-lg shadow-sm transition-all">
                            Satın Al
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Credit Purchase Success Modal -->
            <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-500 mx-auto mb-4">
                            <i class="fas fa-check text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Satın Alma Başarılı!</h3>
                        <p class="text-gray-600 dark:text-gray-400" id="success-info">30 kredi hesabınıza eklendi.</p>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6">
                        <div class="flex justify-between items-center">
                            <span>Yeni Bakiye:</span>
                            <span class="font-bold" id="new-balance">33 kredi</span>
                        </div>
                    </div>
                    
                    <button id="close-success" class="w-full px-4 py-2.5 bg-dream-primary hover:bg-dream-primary/90 text-white rounded-lg transition-colors">
                        Tamam
                    </button>
                </div>
            </div>
            
            <!-- No Credits Modal -->
            <div id="no-credits-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center text-yellow-500 mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Yeterli Krediniz Yok</h3>
                        <p class="text-gray-600 dark:text-gray-400">Rüya analizi için 1 krediye ihtiyacınız var. Daha fazla rüya yorumlamak için kredi satın alın.</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <button id="close-no-credits" class="px-4 py-2.5 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                            Daha Sonra
                        </button>
                        <button id="buy-credits-modal" class="px-4 py-2.5 bg-dream-gradient hover:opacity-90 text-white rounded-lg shadow-sm transition-all">
                            Kredi Satın Al
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // DOM Elements
        const mobileNavToggle = document.getElementById('mobile-nav-toggle');
        const mobileNav = document.getElementById('mobile-nav');
        const themeToggle = document.getElementById('theme-btn');
        const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
        const desktopNav = document.getElementById('desktop-nav');
        const backButton = document.getElementById('back-button');
        
        // Navigation buttons (desktop)
        const navJournal = document.getElementById('nav-journal');
        const navCommunity = document.getElementById('nav-community');
        const navTraining = document.getElementById('nav-training');
        
        // Navigation buttons (mobile)
        const mobileNavJournal = document.getElementById('mobile-nav-journal');
        const mobileNavCommunity = document.getElementById('mobile-nav-community');
        const mobileNavTraining = document.getElementById('mobile-nav-training');
        
        // User area elements
        const loginArea = document.getElementById('login-area');
        const userArea = document.getElementById('user-area');
        const userMenuButton = document.getElementById('user-menu-button');
        const userDropdown = document.getElementById('user-dropdown');
        const usernameDisplay = document.getElementById('username-display');
        const userInitial = document.getElementById('user-initial');
        const dropdownUsername = document.getElementById('dropdown-username');
        const dropdownEmail = document.getElementById('dropdown-email');
        const creditCount = document.getElementById('credit-count');
        const mobileUserSection = document.getElementById('mobile-user-section');
        const mobileUserOptions = document.getElementById('mobile-user-options');
        const mobileAuthSection = document.getElementById('mobile-auth-section');
        const mobileUsername = document.getElementById('mobile-username');
        const mobileUserInitial = document.getElementById('mobile-user-initial');
        const mobileCreditCount = document.getElementById('mobile-credit-count');
        
        // Login/Register
        const loginButton = document.getElementById('login-button');
        const registerButton = document.getElementById('register-button');
        const mobileLoginButton = document.getElementById('mobile-login-button');
        const mobileRegisterButton = document.getElementById('mobile-register-button');
        const switchToRegister = document.getElementById('switch-to-register');
        const switchToLogin = document.getElementById('switch-to-login');
        const loginSubmit = document.getElementById('login-submit');
        const registerSubmit = document.getElementById('register-submit');
        const communityLoginBtn = document.getElementById('community-login-btn');
        const communityRegisterBtn = document.getElementById('community-register-btn');
        const analysisLoginBtn = document.getElementById('analysis-login-btn');
        const analysisRegisterBtn = document.getElementById('analysis-register-btn');
        
        // User menu buttons
        const accountBtn = document.getElementById('account-btn');
        const creditsBtn = document.getElementById('credits-btn');
        const settingsBtn = document.getElementById('settings-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const mobileAccountBtn = document.getElementById('mobile-account-btn');
        const mobileCreditsBtn = document.getElementById('mobile-credits-btn');
        const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
        
        // Credits/Purchase
        const buyCreditsBtn = document.getElementById('buy-credits-btn');
        const buyCreditsForAnalysis = document.getElementById('buy-credits-for-analysis');
        const currentCredits = document.getElementById('current-credits');
        const buyCreditsModal = document.getElementById('buy-credits-modal');
        const purchaseModal = document.getElementById('purchase-modal');
        const successModal = document.getElementById('success-modal');
        const noCreditsModal = document.getElementById('no-credits-modal');
        const purchaseInfo = document.getElementById('purchase-info');
        const purchasePrice = document.getElementById('purchase-price');
        const confirmPurchase = document.getElementById('confirm-purchase');
        const cancelPurchase = document.getElementById('cancel-purchase');
        const successInfo = document.getElementById('success-info');
        const newBalance = document.getElementById('new-balance');
        const closeSuccess = document.getElementById('close-success');
        const closeNoCredits = document.getElementById('close-no-credits');
        const buyButtons = document.querySelectorAll('.buy-credit-btn');
        
        // Account page
        const accountUsername = document.getElementById('account-username');
        const accountEmail = document.getElementById('account-email');
        const accountCredits = document.getElementById('account-credits');
        const accountUserInitial = document.getElementById('account-user-initial');
        const accountSaveChanges = document.getElementById('account-save-changes');
        
        // Content sections
        const welcomeScreen = document.getElementById('welcome-screen');
        const loginScreen = document.getElementById('login-screen');
        const registerScreen = document.getElementById('register-screen');
        const journalScreen = document.getElementById('journal-screen');
        const communityScreen = document.getElementById('community-screen');
        const trainingScreen = document.getElementById('training-screen');
        const dreamForm = document.getElementById('dream-form');
        const dreamDetail = document.getElementById('dream-detail');
        const creditsScreen = document.getElementById('credits-screen');
        const accountScreen = document.getElementById('account-screen');
        const communityLoginRequired = document.getElementById('community-login-required');
        const communityShareContainer = document.getElementById('community-share-container');
        
        // Dream analysis elements
        const dreamAnalysis = document.getElementById('dream-analysis');
        const noAnalysis = document.getElementById('no-analysis');
        const noAnalysisLogin = document.getElementById('no-analysis-login');
        const noAnalysisCredits = document.getElementById('no-analysis-credits');
        const analysisLoading = document.getElementById('analysis-loading');
        const detailAnalyzeBtn = document.getElementById('detail-analyze-btn');
        
        // Other buttons
        const startButton = document.getElementById('start-button');
        const exploreCommunity = document.getElementById('explore-community');
        const addDreamBtn = document.getElementById('add-dream-btn');
        const emptyAddBtn = document.getElementById('empty-add-btn');
        const closeFormBtn = document.getElementById('close-form-btn');
        const saveDreamBtn = document.getElementById('save-dream-btn');
        const analyzeDreamBtn = document.getElementById('analyze-dream-btn');
        const backToJournalBtn = document.getElementById('back-to-journal-btn');
        
        // Dream entry form
        const dreamTitle = document.getElementById('dream-title');
        const dreamDate = document.getElementById('dream-date');
        const dreamDescription = document.getElementById('dream-description');
        const dreamClarity = document.getElementById('dream-clarity');
        const dreamTypeCheckboxes = document.querySelectorAll('input[name="dream-type"]');
        
        // FAQ toggles
        const faqToggles = document.querySelectorAll('.faq-toggle');
        
        // State management
        let dreams = [];
        let currentDreamId = null;
        let isRecording = false;
        let isLoggedIn = false;
        let user = null;
        let credits = 3; // Free credits for new users
        let currentPurchaseCredits = 0;
        let currentPurchasePrice = 0;
        let queryCount = 0; // Track number of queries made by user
        
        // Navigation history for back button
        let pageHistory = [];
        
        // Initialize the app
        function initApp() {
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            dreamDate.value = today;
            
            // Create demo user if none exists
            createDemoUser();
            
            // Load saved dreams
            loadDreams();
            updateDreamList();
            updateShareDropdown();
            
            // Properly format empty journal message
            checkEmptyJournal();
            
            // Check user login state
            checkLoginState();
            
            // Set community state based on login
            updateCommunitySection();
            
            // Initialize page history with welcome screen
            pageHistory = [welcomeScreen];
            
            // Load saved query count
            const savedQueryCount = localStorage.getItem('queryCount');
            if (savedQueryCount) {
                queryCount = parseInt(savedQueryCount);
            }
            
            // Update share username
            if (user) {
                document.getElementById('share-username').textContent = user.username;
            }
            
            // Add event listeners for community comment buttons
            setupCommentButtons();
        }
        
        // Create a demo user for testing
        function createDemoUser() {
            // Check if demo user already exists
            if (!localStorage.getItem('dreamSyncUser')) {
                // Create demo user
                const demoUser = {
                    username: "DemoKullanıcı",
                    email: "demo@dreamsync.com",
                    credits: 15, // Start with 15 credits for testing
                    created: new Date().toISOString()
                };
                
                // Save to localStorage
                localStorage.setItem('dreamSyncUser', JSON.stringify(demoUser));
                
                // Create a sample dream for demo user
                const sampleDream = {
                    id: Date.now().toString(),
                    title: "Uçma Rüyası",
                    date: new Date().toISOString().split('T')[0],
                    description: "Rüyamda gökyüzünde özgürce uçabiliyordum. Şehrin üzerinde süzülürken kanatlarım yoktu ama düşüncelerimle hareket edebiliyordum. Yüksekten şehri izlemek muhteşem bir duyguydu. Bir noktada rüyada olduğumu fark ettim ve daha yükseğe çıkmayı denedim.",
                    clarity: 4,
                    types: ["lucid"],
                    created: new Date().toISOString(),
                    analysis: {
                        interpretation: "Bu rüya, özgürlük ve kontrol arzunuzu yansıtıyor. Uçmak, günlük yaşamınızda hissettiğiniz kısıtlamalardan kurtulma ve sınırları aşma arzunuzu sembolize eder. Şehrin üzerinde uçmak, hayatınızın mevcut durumuna daha geniş bir perspektiften bakabilme yeteneğinizi gösteriyor.\n\nRüyada bilinçlilik kazanmanız (lucid olması), hayatınızın kontrolünü elinize alma ve kendi yolunuzu belirleme arzunuzu işaret ediyor. Düşüncelerinizle hareket edebilmek, zihinsel gücünüzün ve iradenizin, fiziksel sınırlamalardan daha güçlü olabileceğine dair inancınızı gösteriyor.\n\nBu rüya aynı zamanda, daha yükseğe çıkma arzunuzda görüldüğü gibi, büyüme ve kişisel gelişim isteğinizi de yansıtıyor. Özgürce hareket edebilmek, yaşamınızda esneklik ve spontanlık arayışınızı gösteriyor.",
                        themes: ["Özgürlük", "Kontrol", "Perspektif Kazanma", "Kişisel Gelişim"],
                        emotions: ["Heyecan", "Merak", "Özgüven"],
                        symbols: ["Uçmak", "Şehir", "Yükseklik"]
                    }
                };
                
                const dreams = [sampleDream];
                localStorage.setItem('dreams', JSON.stringify(dreams));
                
                // Add credits entry to history
                const creditHistoryHtml = `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            ${new Date().toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' })}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400">
                                Kaydolma Bonusu
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            +3 kredi
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            3 kredi
                        </td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            ${new Date().toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' })}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400">
                                Demo Kredi Yüklemesi
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            +12 kredi
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            15 kredi
                        </td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            ${new Date().toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' })}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400">
                                Rüya Analizi
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            -1 kredi
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                            14 kredi
                        </td>
                    </tr>
                `;
                
                // Update credit history display
                const creditHistory = document.getElementById('credit-history');
                if (creditHistory) {
                    creditHistory.innerHTML = creditHistoryHtml;
                }
            }
        }
        
        // Check if user is logged in
        function checkLoginState() {
            // Try to load user from localStorage
            try {
                const userData = localStorage.getItem('dreamSyncUser');
                if (userData) {
                    user = JSON.parse(userData);
                    isLoggedIn = true;
                    credits = user.credits || 3;
                    
                    // Update UI for logged in state
                    updateLoginState();
                }
            } catch (e) {
                console.error('Error loading user data:', e);
                isLoggedIn = false;
                user = null;
            }
        }
        
        function updateLoginState() {
            if (isLoggedIn && user) {
                // Show user area, hide login area
                loginArea.classList.add('hidden');
                userArea.classList.remove('hidden');
                
                // Update user information
                usernameDisplay.textContent = user.username;
                userInitial.textContent = user.username.charAt(0).toUpperCase();
                dropdownUsername.textContent = user.username;
                dropdownEmail.textContent = user.email;
                creditCount.textContent = credits;
                
                // Update mobile menu
                mobileUserSection.classList.remove('hidden');
                mobileUserOptions.classList.remove('hidden');
                mobileAuthSection.classList.add('hidden');
                mobileUsername.textContent = user.username;
                mobileUserInitial.textContent = user.username.charAt(0).toUpperCase();
                mobileCreditCount.textContent = credits;
                
                // Update account page
                accountUsername.textContent = user.username;
                accountEmail.textContent = user.email;
                accountCredits.textContent = credits;
                accountUserInitial.textContent = user.username.charAt(0).toUpperCase();
                
                // Update credit display on credits page
                currentCredits.textContent = credits;
                
                // Update community section
                updateCommunitySection();
                
                // If credits are low, show pulsing animation
                if (credits < 2) {
                    document.getElementById('credit-counter').classList.add('credit-pulse');
                } else {
                    document.getElementById('credit-counter').classList.remove('credit-pulse');
                }
                
                // Show desktop nav if available
                if (desktopNav) {
                    desktopNav.classList.remove('hidden');
                }
            } else {
                // Show login area, hide user area
                loginArea.classList.remove('hidden');
                userArea.classList.add('hidden');
                
                // Update mobile menu
                mobileUserSection.classList.add('hidden');
                mobileUserOptions.classList.add('hidden');
                mobileAuthSection.classList.remove('hidden');
                
                // Update community section
                updateCommunitySection();
                
                // Hide desktop nav for non-logged in users on smaller screens
                if (window.innerWidth < 768 && desktopNav) {
                    desktopNav.classList.add('hidden');
                }
            }
        }
        
        // Update community section based on login state
        function updateCommunitySection() {
            if (isLoggedIn) {
                communityLoginRequired.classList.add('hidden');
                communityShareContainer.classList.remove('hidden');
            } else {
                communityLoginRequired.classList.remove('hidden');
                communityShareContainer.classList.add('hidden');
            }
        }
        
        // Login function
        function loginUser(email, password) {
            // Validate email and password (basic validation)
            if (!email || !password) {
                return false;
            }
            
            // Burada gerçekte server'da doğrulama yapılacaktır
            // Demo için hızlı bir login simülasyonu yapıyoruz
            
            // Check if user exists in localStorage (simple user check for demo)
            const storedUser = localStorage.getItem('dreamSyncUser');
            
            if (storedUser) {
                // In real app, we would validate password here
                // For demo, just check if email matches
                const userData = JSON.parse(storedUser);
                if (userData.email.toLowerCase() === email.toLowerCase()) {
                    // Use existing user data
                    user = userData;
                } else {
                    // Create a new user if email doesn't match
                    user = {
                        username: email.split('@')[0],
                        email: email,
                        credits: 3 // Start with 3 free credits
                    };
                }
            } else {
                // Create a new user if none exists
                user = {
                    username: email.split('@')[0],
                    email: email,
                    credits: 3 // Start with 3 free credits
                };
            }
            
            // Save user to localStorage
            localStorage.setItem('dreamSyncUser', JSON.stringify(user));
            
            isLoggedIn = true;
            credits = user.credits;
            
            // Update UI for logged in state
            updateLoginState();
            
            // Return to welcome screen
            showSection(welcomeScreen);
            
            // Show success notification
            showNotification('Başarıyla giriş yapıldı! Hoş geldiniz.', 'success');
            
            // Update share username display
            if (user && document.getElementById('share-username')) {
                document.getElementById('share-username').textContent = user.username;
            }
            
            return true;
        }
        
        // Show notification function
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            
            // Set style based on type
            let bgColor, icon;
            
            if (type === 'success') {
                bgColor = 'bg-green-500';
                icon = '<i class="fas fa-check-circle mr-2 text-lg"></i>';
            } else if (type === 'error') {
                bgColor = 'bg-red-500';
                icon = '<i class="fas fa-exclamation-circle mr-2 text-lg"></i>';
            } else {
                bgColor = 'bg-blue-500';
                icon = '<i class="fas fa-info-circle mr-2 text-lg"></i>';
            }
            
            notification.className = `fixed bottom-4 right-4 ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center`;
            notification.innerHTML = `${icon}<span>${message}</span>`;
            
            // Add to document
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        }
        
        // Register function
        function registerUser(username, email, password, passwordConfirm) {
            // Check if passwords match
            if (password !== passwordConfirm) {
                showNotification('Şifreler eşleşmiyor!', 'error');
                return false;
            }
            
            // Check if terms are accepted
            if (!document.getElementById('terms-checkbox').checked) {
                showNotification('Devam etmek için kullanım koşullarını kabul etmelisiniz.', 'error');
                return false;
            }
            
            // Create a new user
            user = {
                username: username,
                email: email,
                credits: 3 // Start with 3 free credits
            };
            
            // Save user to localStorage
            localStorage.setItem('dreamSyncUser', JSON.stringify(user));
            
            // Add registration credit to history
            addCreditHistory('Kaydolma Bonusu', 3, 3);
            
            isLoggedIn = true;
            credits = user.credits;
            
            // Update UI for logged in state
            updateLoginState();
            
            // Return to welcome screen
            showSection(welcomeScreen);
            
            // Show success notification
            showNotification('Hesabınız başarıyla oluşturuldu! Hoş geldiniz.', 'success');
            
            // Update share username display
            if (document.getElementById('share-username')) {
                document.getElementById('share-username').textContent = username;
            }
            
            return true;
        }
        
        // Logout function
        function logoutUser() {
            // Clear user data
            localStorage.removeItem('dreamSyncUser');
            
            isLoggedIn = false;
            user = null;
            
            // Update UI for logged out state
            updateLoginState();
            
            // Return to welcome screen
            showSection(welcomeScreen);
        }
        
        // Purchase credits
        function purchaseCredits(amount, price) {
            // Set current purchase info
            currentPurchaseCredits = amount;
            currentPurchasePrice = price;
            
            // Update modal
            purchaseInfo.textContent = `${amount} kredi satın almak üzeresiniz.`;
            purchasePrice.textContent = `$${price}`;
            
            // Show purchase confirmation modal
            purchaseModal.classList.remove('hidden');
        }
        
        // Complete purchase
        function completePurchase() {
            // Add credits to user account
            const newCredits = credits + currentPurchaseCredits;
            credits = newCredits;
            
            if (user) {
                user.credits = newCredits;
                localStorage.setItem('dreamSyncUser', JSON.stringify(user));
            }
            
            // Add to credit history
            addCreditHistory(`${currentPurchaseCredits} Kredi Satın Alma`, currentPurchaseCredits, newCredits);
            
            // Update credit displays
            creditCount.textContent = newCredits;
            mobileCreditCount.textContent = newCredits;
            accountCredits.textContent = newCredits;
            currentCredits.textContent = newCredits;
            
            // Update success modal
            successInfo.textContent = `${currentPurchaseCredits} kredi hesabınıza eklendi.`;
            newBalance.textContent = `${newCredits} kredi`;
            
            // Hide purchase modal, show success modal
            purchaseModal.classList.add('hidden');
            successModal.classList.remove('hidden');
            
            // Remove pulsing if we now have enough credits
            if (newCredits >= 2) {
                document.getElementById('credit-counter').classList.remove('credit-pulse');
            }
        }
        
        // Add credit history
        function addCreditHistory(transaction, amount, total) {
            const creditHistory = document.getElementById('credit-history');
            const today = new Date().toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
            
            // Create transaction row
            const row = document.createElement('tr');
            
            // Format for addition or removal
            const amountText = amount > 0 ? `+${amount} kredi` : `${amount} kredi`;
            const amountClass = amount > 0 ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400' : 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400';
            
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                    ${today}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                    <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${amountClass}">
                        ${transaction}
                    </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                    ${amountText}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">
                    ${total} kredi
                </td>
            `;
            
            // Add to credit history table
            creditHistory.prepend(row);
        }
        
        // Use credits for analysis
        function useCreditsForAnalysis() {
            if (credits <= 0) {
                // Show no credits modal
                noCreditsModal.classList.remove('hidden');
                return false;
            }
            
            // Deduct 1 credit
            credits--;
            
            // Update user data
            if (user) {
                user.credits = credits;
                localStorage.setItem('dreamSyncUser', JSON.stringify(user));
            }
            
            // Add to credit history
            addCreditHistory('Rüya Analizi', -1, credits);
            
            // Update credit displays
            creditCount.textContent = credits;
            mobileCreditCount.textContent = credits;
            accountCredits.textContent = credits;
            currentCredits.textContent = credits;
            
            // Add pulsing if we're low on credits
            if (credits < 2) {
                document.getElementById('credit-counter').classList.add('credit-pulse');
            }
            
            return true;
        }
        
        // Navigation Functions
        function showSection(section) {
            // Add current section to history if it's different from last section
            if (pageHistory.length === 0 || pageHistory[pageHistory.length - 1] !== section) {
                pageHistory.push(section);
            }
            
            // Hide all sections
            welcomeScreen.classList.add('hidden');
            loginScreen.classList.add('hidden');
            registerScreen.classList.add('hidden');
            journalScreen.classList.add('hidden');
            communityScreen.classList.add('hidden');
            trainingScreen.classList.add('hidden');
            dreamForm.classList.add('hidden');
            dreamDetail.classList.add('hidden');
            creditsScreen.classList.add('hidden');
            accountScreen.classList.add('hidden');
            
            // Show the selected section
            section.classList.remove('hidden');
            
            // Close mobile nav
            mobileNav.classList.add('hidden');
            
            // Close user dropdown
            userDropdown.classList.add('hidden');
            
            // Update active states
            updateActiveNav();
            
            // Update community section based on login state
            if (section === communityScreen) {
                updateCommunitySection();
            }
            
            // Show back button if we're not on the welcome screen
            const backButton = document.getElementById('back-button');
            if (section === welcomeScreen) {
                backButton.classList.add('hidden');
            } else {
                backButton.classList.remove('hidden');
            }
        }
        
        // Navigation back function
        function goBack() {
            // Remove the current page from history
            if (pageHistory.length > 0) {
                pageHistory.pop();
            }
            
            // Get the previous page
            const previousPage = pageHistory.length > 0 ? pageHistory[pageHistory.length - 1] : welcomeScreen;
            
            // Show the previous page
            // Remove it from history first to avoid duplication
            pageHistory.pop();
            showSection(previousPage);
        }
        
        function updateActiveNav() {
            // Remove active state from all nav items
            navJournal.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-dream-primary');
            navCommunity.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-dream-primary');
            navTraining.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-dream-primary');
            
            mobileNavJournal.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-dream-primary');
            mobileNavCommunity.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-dream-primary');
            mobileNavTraining.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-dream-primary');
            
            // Set active state based on visible section
            if (!journalScreen.classList.contains('hidden')) {
                navJournal.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-dream-primary');
                mobileNavJournal.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-dream-primary');
            } else if (!communityScreen.classList.contains('hidden')) {
                navCommunity.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-dream-primary');
                mobileNavCommunity.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-dream-primary');
            } else if (!trainingScreen.classList.contains('hidden')) {
                navTraining.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-dream-primary');
                mobileNavTraining.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-dream-primary');
            }
        }
        
        // Dream Management Functions
        function loadDreams() {
            try {
                const savedDreams = localStorage.getItem('dreams');
                if (savedDreams) {
                    dreams = JSON.parse(savedDreams);
                }
            } catch (error) {
                console.error('Error loading dreams:', error);
                dreams = [];
            }
        }
        
        function saveDreams() {
            try {
                localStorage.setItem('dreams', JSON.stringify(dreams));
            } catch (error) {
                console.error('Error saving dreams:', error);
            }
        }
        
        function formatDate(dateString) {
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return new Date(dateString).toLocaleDateString('tr-TR', options);
        }
        
        function getDreamTypeLabel(types) {
            if (types.includes('lucid')) return 'Lucid Rüya';
            if (types.includes('nightmare')) return 'Kabus';
            if (types.includes('recurring')) return 'Tekrarlayan Rüya';
            return 'Normal Rüya';
        }
        
        function getDreamTypeClass(types) {
            if (types.includes('lucid')) return 'blue';
            if (types.includes('nightmare')) return 'red';
            if (types.includes('recurring')) return 'yellow';
            return 'gray';
        }
        
        function getClarityLabel(clarity) {
            const labels = ['Çok Bulanık', 'Bulanık', 'Orta', 'Net', 'Çok Net'];
            return labels[clarity - 1];
        }
        
        function updateDreamList() {
            const dreamsContainer = document.getElementById('dreams-container');
            const emptyJournal = document.getElementById('empty-journal');
            
            // Show empty state if no dreams
            if (dreams.length === 0) {
                emptyJournal.classList.remove('hidden');
                return;
            }
            
            // Hide empty state and prepare for dream list
            emptyJournal.classList.add('hidden');
            
            // Sort dreams by date (newest first)
            const sortedDreams = [...dreams].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            let dreamListHTML = '';
            
            sortedDreams.forEach(dream => {
                const typeColor = getDreamTypeClass(dream.types);
                const typeLabel = getDreamTypeLabel(dream.types);
                
                // Add badge if dream has analysis
                const analysisIcon = dream.analysis ? 
                    `<span class="bg-dream-primary/10 dark:bg-dream-primary/20 text-dream-primary dark:text-dream-secondary text-xs px-2 py-0.5 rounded-full ml-2">
                        <i class="fas fa-brain mr-0.5"></i> Analiz Edildi
                     </span>` : '';
                
                dreamListHTML += `
                    <div class="dream-card p-6 rounded-xl" data-dream-id="${dream.id}">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-bold text-lg flex items-center">${dream.title} ${analysisIcon}</h3>
                            <span class="bg-${typeColor}-100 dark:bg-${typeColor}-900/30 text-${typeColor}-600 dark:text-${typeColor}-400 text-xs px-2 py-1 rounded-full">
                                ${typeLabel}
                            </span>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400 mb-4 line-clamp-3">
                            ${dream.description}
                        </p>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 dark:text-gray-400 text-sm">${formatDate(dream.date)}</span>
                            <button class="view-dream-btn px-3 py-1 text-sm bg-dream-primary/10 dark:bg-dream-primary/20 text-dream-primary rounded-lg hover:bg-dream-primary/20 dark:hover:bg-dream-primary/30 transition-colors">
                                <i class="fas fa-eye mr-1"></i> Görüntüle
                            </button>
                        </div>
                    </div>
                `;
            });
            
            // Update the container with new HTML
            dreamsContainer.innerHTML = dreamListHTML + emptyJournal.outerHTML;
            
            // Add event listeners to the view buttons
            document.querySelectorAll('.view-dream-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const dreamId = this.closest('.dream-card').dataset.dreamId;
                    viewDream(dreamId);
                });
            });
            
            // Update share dropdown
            updateShareDropdown();
        }
        
        function checkEmptyJournal() {
            const emptyJournal = document.getElementById('empty-journal');
            if (dreams.length > 0) {
                emptyJournal.classList.add('hidden');
            } else {
                emptyJournal.classList.remove('hidden');
            }
        }
        
        function updateShareDropdown() {
            shareDreamSelect.innerHTML = '<option value="" disabled selected>Paylaşmak istediğiniz rüyayı seçin...</option>';
            
            if (dreams.length > 0) {
                dreams.forEach(dream => {
                    const option = document.createElement('option');
                    option.value = dream.id;
                    option.textContent = dream.title;
                    shareDreamSelect.appendChild(option);
                });
                
                shareAnonymouslyBtn.disabled = false;
                shareMatchingBtn.disabled = false;
            } else {
                shareAnonymouslyBtn.disabled = true;
                shareMatchingBtn.disabled = true;
            }
        }
        
        function createNewDream() {
            // Get form values
            const title = dreamTitle.value.trim();
            const date = dreamDate.value;
            const description = dreamDescription.value.trim();
            const clarity = parseInt(dreamClarity.value);
            
            // Get selected dream types
            const types = [];
            dreamTypeCheckboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    types.push(checkbox.value);
                }
            });
            
            // Validate
            if (!title) {
                alert('Lütfen rüyanız için bir başlık girin.');
                return;
            }
            
            if (!description) {
                alert('Lütfen rüyanızı anlatın.');
                return;
            }
            
            // Create dream object
            const newDream = {
                id: Date.now().toString(),
                title,
                date,
                description,
                clarity,
                types,
                created: new Date().toISOString(),
                analysis: null
            };
            
            // Add to dreams array
            dreams.push(newDream);
            
            // Save to localStorage
            saveDreams();
            
            // Update the UI
            updateDreamList();
            
            // Reset form
            resetDreamForm();
            
            // Switch to journal view
            showSection(journalScreen);
        }
        
        function resetDreamForm() {
            dreamTitle.value = '';
            dreamDate.value = new Date().toISOString().split('T')[0];
            dreamDescription.value = '';
            dreamClarity.value = 3;
            
            dreamTypeCheckboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Reset voice recording UI
            textEntryBtn.click();
            recordingStatus.textContent = 'Kayıt için tıklayın';
            voiceControls.classList.add('hidden');
            recordingResult.classList.add('hidden');
            isRecording = false;
        }
        
        function viewDream(dreamId) {
            // Find the dream by ID
            const dream = dreams.find(d => d.id === dreamId);
            if (!dream) return;
            
            // Store current dream ID
            currentDreamId = dreamId;
            
            // Update the detail view
            detailTitle.textContent = dream.title;
            detailDate.innerHTML = `<i class="fas fa-calendar-alt mr-1.5"></i> ${formatDate(dream.date)}`;
            
            const typeColor = getDreamTypeClass(dream.types);
            const typeLabel = getDreamTypeLabel(dream.types);
            detailType.className = `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${typeColor}-100 dark:bg-${typeColor}-900/30 text-${typeColor}-800 dark:text-${typeColor}-300`;
            detailType.innerHTML = `<i class="fas fa-moon mr-1.5"></i> ${typeLabel}`;
            
            detailClarity.innerHTML = `<i class="fas fa-eye mr-1.5"></i> Netlik: ${getClarityLabel(dream.clarity)}`;
            detailDescription.textContent = dream.description;
            
            // Show appropriate analysis state
            updateAnalysisState(dream);
            
            // Show the detail view
            showSection(dreamDetail);
        }
        
        function updateAnalysisState(dream) {
            // Hide all analysis states first
            dreamAnalysis.classList.add('hidden');
            noAnalysis.classList.add('hidden');
            noAnalysisLogin.classList.add('hidden');
            noAnalysisCredits.classList.add('hidden');
            analysisLoading.classList.add('hidden');
            
            // Show appropriate state
            if (dream.analysis) {
                // Dream has been analyzed, show analysis
                dreamAnalysis.classList.remove('hidden');
                
                // Update analysis content
                analysisContent.innerHTML = dream.analysis.interpretation;
                
                // Update themes
                let themesHTML = '';
                dream.analysis.themes.forEach(theme => {
                    themesHTML += `
                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                            ${theme}
                        </span>
                    `;
                });
                analysisThemes.innerHTML = themesHTML;
                
                // Update emotions
                let emotionsHTML = '';
                dream.analysis.emotions.forEach(emotion => {
                    emotionsHTML += `
                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300">
                            ${emotion}
                        </span>
                    `;
                });
                analysisEmotions.innerHTML = emotionsHTML;
                
                // Update symbols
                let symbolsHTML = '';
                dream.analysis.symbols.forEach(symbol => {
                    symbolsHTML += `
                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300">
                            ${symbol}
                        </span>
                    `;
                });
                analysisSymbols.innerHTML = symbolsHTML;
            } else if (!isLoggedIn) {
                // User is not logged in, show login prompt
                noAnalysisLogin.classList.remove('hidden');
            } else if (credits <= 0) {
                // User is out of credits, show credits prompt
                noAnalysisCredits.classList.remove('hidden');
            } else {
                // Regular state: not analyzed but can be
                noAnalysis.classList.remove('hidden');
            }
        }
        
        async function analyzeDream(dreamId) {
            // Find the dream by ID
            const dream = dreams.find(d => d.id === dreamId);
            if (!dream) return;
            
            // Check if user is logged in
            if (!isLoggedIn) {
                showSection(loginScreen);
                return;
            }
            
            // Check if user has enough credits
            if (credits <= 0) {
                noCreditsModal.classList.remove('hidden');
                return;
            }
            
            // Use a credit
            if (!useCreditsForAnalysis()) {
                return;
            }
            
            // Increment query count
            queryCount++;
            
            // Show loading state
            noAnalysis.classList.add('hidden');
            noAnalysisLogin.classList.add('hidden');
            noAnalysisCredits.classList.add('hidden');
            dreamAnalysis.classList.add('hidden');
            analysisLoading.classList.remove('hidden');
            
            try {
                // Create a prompt for the AI analysis
                // Adjust response length based on query count
                let wordLength = queryCount < 4 ? "50" : "150";
                
                const prompt = `Analyze this dream in Turkish (respond in Turkish), focusing on psychological and symbolic meaning:
                
                Dream title: ${dream.title}
                Dream content: ${dream.description}
                Dream type: ${getDreamTypeLabel(dream.types)}
                
                Please provide:
                1. A detailed psychological interpretation (about ${wordLength} words)
                2. Major themes (3-5 key themes)
                3. Emotions present in the dream (2-4 emotions)
                4. Symbolic elements and their meanings (2-4 symbols)
                
                Format your response as valid JSON with the following structure:
                {
                  "interpretation": "Your detailed psychological analysis here...",
                  "themes": ["theme1", "theme2", "theme3"],
                  "emotions": ["emotion1", "emotion2"],
                  "symbols": ["symbol1", "symbol2"]
                }
                
                Ensure the response is ONLY the JSON with no additional text, markdown formatting, or code blocks.`;
                
                // Use Claude AI for analysis
                const result = await window.Poe.sendUserMessage(
                    `@Claude-3.7-Sonnet ${prompt}`,
                    {
                        stream: false,
                        openChat: false
                    }
                );
                
                // Save query count to localStorage
                localStorage.setItem('queryCount', queryCount);
                
                // Simulate a delay for better UX
                setTimeout(() => {
                    try {
                        // This is a simulation for demo purposes
                        // In a real app, we would parse the AI response from result
                        
                        // Create different analysis based on query count
                        let analysisText = "";
                        
                        if (queryCount < 4) {
                            // Short analysis for first 3 queries
                            analysisText = "Bu rüya özgürlük ve kontrol arzunuzu yansıtıyor. Uçmak, günlük yaşamdaki kısıtlamalardan kurtulma isteğinizi sembolize eder. Düşüncelerinizle hareket edebilmek, zihinsel gücünüzün, fiziksel sınırlamalardan daha güçlü olabileceğine dair inancınızı gösteriyor.";
                        } else {
                            // Longer analysis for 4th and subsequent queries
                            analysisText = `Bu rüya, özgürlük ve keşif arzunuzu yansıtıyor. Uçmak, günlük yaşamınızda hissettiğiniz kısıtlamalardan kurtulma ve sınırları aşma arzunuzu sembolize eder. Şehrin üzerinde uçmak, hayatınızın mevcut durumuna daha geniş bir perspektiften bakabilme yeteneğinizi gösteriyor.\n\nRüyada bilinçlilik kazanmanız (lucid olması), hayatınızın kontrolünü elinize alma ve kendi yolunuzu belirleme arzunuzu işaret ediyor. Düşüncelerinizle hareket edebilmek, zihinsel gücünüzün ve iradenizin, fiziksel sınırlamalardan daha güçlü olabileceğine dair inancınızı gösteriyor.\n\nBu rüya aynı zamanda, daha yükseğe çıkma arzunuzda görüldüğü gibi, büyüme ve kişisel gelişim isteğinizi de yansıtıyor. Özgürce hareket edebilmek, yaşamınızda esneklik ve spontanlık arayışınızı gösteriyor.`;
                        }
                        
                        const analysis = {
                            interpretation: analysisText,
                            themes: ["Özgürlük", "Kontrol", "Perspektif Kazanma", "Kişisel Gelişim"],
                            emotions: ["Heyecan", "Merak", "Özgüven"],
                            symbols: ["Uçmak", "Şehir", "Yükseklik"]
                        };
                        
                        // Update the dream with analysis
                        dream.analysis = analysis;
                        saveDreams();
                        
                        // Update UI to show analysis
                        dreamAnalysis.classList.remove('hidden');
                        analysisLoading.classList.add('hidden');
                        
                        // Update analysis content
                        analysisContent.innerHTML = analysis.interpretation;
                        
                        // Update themes
                        let themesHTML = '';
                        analysis.themes.forEach(theme => {
                            themesHTML += `
                                <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                                    ${theme}
                                </span>
                            `;
                        });
                        analysisThemes.innerHTML = themesHTML;
                        
                        // Update emotions
                        let emotionsHTML = '';
                        analysis.emotions.forEach(emotion => {
                            emotionsHTML += `
                                <span class="px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300">
                                    ${emotion}
                                </span>
                            `;
                        });
                        analysisEmotions.innerHTML = emotionsHTML;
                        
                        // Update symbols
                        let symbolsHTML = '';
                        analysis.symbols.forEach(symbol => {
                            symbolsHTML += `
                                <span class="px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300">
                                    ${symbol}
                                </span>
                            `;
                        });
                        analysisSymbols.innerHTML = symbolsHTML;
                        
                        // Update dream list to show analysis badge
                        updateDreamList();
                    } catch (error) {
                        console.error('Error processing AI response:', error);
                        analysisLoading.classList.add('hidden');
                        noAnalysis.classList.remove('hidden');
                        alert('Rüya analizi yapılırken bir hata oluştu. Lütfen tekrar deneyin.');
                    }
                }, 2000);
                
            } catch (error) {
                console.error('Error analyzing dream:', error);
                analysisLoading.classList.add('hidden');
                noAnalysis.classList.remove('hidden');
                alert('Rüya analizi yapılırken bir hata oluştu. Lütfen tekrar deneyin.');
            }
        }
        
        // Voice recording simulation functions
        function toggleVoiceRecording() {
            if (!isRecording) {
                // Start recording
                isRecording = true;
                recordBtn.classList.add('recording-pulse');
                recordingStatus.textContent = 'Kayıt yapılıyor...';
                voiceControls.classList.remove('hidden');
            } else {
                // Stop recording
                isRecording = false;
                recordBtn.classList.remove('recording-pulse');
                recordingStatus.textContent = 'Kayıt için tıklayın';
                voiceControls.classList.add('hidden');
                
                // Show simulated result
                recordingResult.classList.remove('hidden');
                voiceToText.textContent = 'Rüyamda uçabiliyordum. Şehrin üzerinde özgürce süzülüyordum ve muhteşem bir duyguydu.';
            }
        }
        
        // Back button
        backButton.addEventListener('click', () => {
            goBack();
        });
            
        // Event Listeners
        // Theme toggle
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
        });
        
        mobileThemeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
        });
        
        // Mobile menu toggle
        mobileNavToggle.addEventListener('click', () => {
            mobileNav.classList.toggle('hidden');
        });
        
        // User menu toggle
        userMenuButton.addEventListener('click', () => {
            userDropdown.classList.toggle('hidden');
        });
        
        // Close user dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!userMenuButton.contains(event.target) && !userDropdown.contains(event.target)) {
                userDropdown.classList.add('hidden');
            }
        });
        
        // Login/Register buttons
        loginButton.addEventListener('click', () => showSection(loginScreen));
        registerButton.addEventListener('click', () => showSection(registerScreen));
        mobileLoginButton.addEventListener('click', () => showSection(loginScreen));
        mobileRegisterButton.addEventListener('click', () => showSection(registerScreen));
        
        // Switch between login and register
        switchToRegister.addEventListener('click', (e) => {
            e.preventDefault();
            showSection(registerScreen);
        });
        
        switchToLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showSection(loginScreen);
        });
        
        // Community login/register buttons
        communityLoginBtn.addEventListener('click', () => showSection(loginScreen));
        communityRegisterBtn.addEventListener('click', () => showSection(registerScreen));
        
        // Analysis login/register buttons
        analysisLoginBtn.addEventListener('click', () => showSection(loginScreen));
        analysisRegisterBtn.addEventListener('click', () => showSection(registerScreen));
        
        // Form submissions
        loginSubmit.addEventListener('click', () => {
            const emailInput = document.getElementById('login-email');
            const passwordInput = document.getElementById('login-password');
            const email = emailInput.value.trim();
            const password = passwordInput.value;
            
            // Validate form fields
            if (!email) {
                emailInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => emailInput.classList.remove('border-red-500', 'bg-red-50'), 2000);
                return;
            }
            
            if (!password) {
                passwordInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => passwordInput.classList.remove('border-red-500', 'bg-red-50'), 2000);
                return;
            }
            
            // Show loading state
            loginSubmit.disabled = true;
            loginSubmit.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Giriş Yapılıyor...';
            
            // Simulate a server delay
            setTimeout(() => {
                if (loginUser(email, password)) {
                    // Reset form
                    emailInput.value = '';
                    passwordInput.value = '';
                    
                    // Show success message
                    loginSubmit.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Giriş Başarılı!';
                    setTimeout(() => {
                        loginSubmit.disabled = false;
                        loginSubmit.innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap';
                    }, 1000);
                } else {
                    // Show error message
                    loginSubmit.innerHTML = '<i class="fas fa-exclamation-circle mr-2"></i> Giriş Başarısız';
                    setTimeout(() => {
                        loginSubmit.disabled = false;
                        loginSubmit.innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i> Giriş Yap';
                    }, 1000);
                }
            }, 800);
        });
        
        registerSubmit.addEventListener('click', () => {
            const usernameInput = document.getElementById('register-username');
            const emailInput = document.getElementById('register-email');
            const passwordInput = document.getElementById('register-password');
            const passwordConfirmInput = document.getElementById('register-password-confirm');
            const termsCheckbox = document.getElementById('terms-checkbox');
            
            const username = usernameInput.value.trim();
            const email = emailInput.value.trim();
            const password = passwordInput.value;
            const passwordConfirm = passwordConfirmInput.value;
            
            // Validate form fields
            let isValid = true;
            
            if (!username) {
                usernameInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => usernameInput.classList.remove('border-red-500', 'bg-red-50'), 2000);
                isValid = false;
            }
            
            if (!email) {
                emailInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => emailInput.classList.remove('border-red-500', 'bg-red-50'), 2000);
                isValid = false;
            }
            
            if (!password) {
                passwordInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => passwordInput.classList.remove('border-red-500', 'bg-red-50'), 2000);
                isValid = false;
            }
            
            if (!passwordConfirm) {
                passwordConfirmInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => passwordConfirmInput.classList.remove('border-red-500', 'bg-red-50'), 2000);
                isValid = false;
            }
            
            if (password !== passwordConfirm) {
                passwordInput.classList.add('border-red-500', 'bg-red-50');
                passwordConfirmInput.classList.add('border-red-500', 'bg-red-50');
                setTimeout(() => {
                    passwordInput.classList.remove('border-red-500', 'bg-red-50');
                    passwordConfirmInput.classList.remove('border-red-500', 'bg-red-50');
                }, 2000);
                isValid = false;
            }
            
            if (!termsCheckbox.checked) {
                termsCheckbox.closest('label').classList.add('text-red-500');
                setTimeout(() => termsCheckbox.closest('label').classList.remove('text-red-500'), 2000);
                isValid = false;
            }
            
            if (!isValid) return;
            
            // Show loading state
            registerSubmit.disabled = true;
            registerSubmit.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Kayıt Yapılıyor...';
            
            // Simulate a server delay
            setTimeout(() => {
                if (registerUser(username, email, password, passwordConfirm)) {
                    // Reset form
                    usernameInput.value = '';
                    emailInput.value = '';
                    passwordInput.value = '';
                    passwordConfirmInput.value = '';
                    termsCheckbox.checked = false;
                    
                    // Show success message
                    registerSubmit.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Kayıt Başarılı!';
                    setTimeout(() => {
                        registerSubmit.disabled = false;
                        registerSubmit.innerHTML = '<i class="fas fa-user-plus mr-2"></i> Kayıt Ol';
                    }, 1000);
                } else {
                    // Show error message
                    registerSubmit.innerHTML = '<i class="fas fa-exclamation-circle mr-2"></i> Kayıt Başarısız';
                    setTimeout(() => {
                        registerSubmit.disabled = false;
                        registerSubmit.innerHTML = '<i class="fas fa-user-plus mr-2"></i> Kayıt Ol';
                    }, 1000);
                }
            }, 800);
        });
        
        // User menu options
        accountBtn.addEventListener('click', () => showSection(accountScreen));
        creditsBtn.addEventListener('click', () => showSection(creditsScreen));
        logoutBtn.addEventListener('click', logoutUser);
        
        mobileAccountBtn.addEventListener('click', () => showSection(accountScreen));
        mobileCreditsBtn.addEventListener('click', () => showSection(creditsScreen));
        mobileLogoutBtn.addEventListener('click', logoutUser);
        
        // Navigation
        navJournal.addEventListener('click', () => showSection(journalScreen));
        navCommunity.addEventListener('click', () => showSection(communityScreen));
        navTraining.addEventListener('click', () => showSection(trainingScreen));
        
        mobileNavJournal.addEventListener('click', () => showSection(journalScreen));
        mobileNavCommunity.addEventListener('click', () => showSection(communityScreen));
        mobileNavTraining.addEventListener('click', () => showSection(trainingScreen));
        
        // Credits buttons
        buyCreditsBtn.addEventListener('click', () => showSection(creditsScreen));
        buyCreditsForAnalysis.addEventListener('click', () => showSection(creditsScreen));
        buyCreditsModal.addEventListener('click', () => {
            noCreditsModal.classList.add('hidden');
            showSection(creditsScreen);
        });
        
        // Buy credit buttons
        buyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const credits = parseInt(button.dataset.credits);
                const price = parseFloat(button.dataset.price);
                purchaseCredits(credits, price);
            });
        });
        
        // Purchase modals
        confirmPurchase.addEventListener('click', completePurchase);
        cancelPurchase.addEventListener('click', () => purchaseModal.classList.add('hidden'));
        closeSuccess.addEventListener('click', () => successModal.classList.add('hidden'));
        closeNoCredits.addEventListener('click', () => noCreditsModal.classList.add('hidden'));
        
        // FAQ toggles
        faqToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                const content = this.nextElementSibling;
                const icon = this.querySelector('i');
                
                content.classList.toggle('hidden');
                icon.classList.toggle('transform');
                icon.classList.toggle('rotate-180');
            });
        });
        
        // Add dream buttons
        startButton.addEventListener('click', () => {
            if (isLoggedIn) {
                resetDreamForm();
                showSection(dreamForm);
            } else {
                showSection(loginScreen);
            }
        });
        
        addDreamBtn.addEventListener('click', () => {
            resetDreamForm();
            showSection(dreamForm);
        });
        
        emptyAddBtn.addEventListener('click', () => {
            resetDreamForm();
            showSection(dreamForm);
        });
        
        // Close form
        closeFormBtn.addEventListener('click', () => {
            showSection(journalScreen);
        });
        
        // Save dream
        saveDreamBtn.addEventListener('click', createNewDream);
        
        // Analyze dream from form
        analyzeDreamBtn.addEventListener('click', () => {
            // Check login state
            if (!isLoggedIn) {
                showSection(loginScreen);
                return;
            }
            
            // Check if enough credits
            if (credits <= 0) {
                noCreditsModal.classList.remove('hidden');
                return;
            }
            
            // First save the dream
            createNewDream();
            
            // Then find the saved dream's ID (the latest one)
            const latestDream = dreams[dreams.length - 1];
            if (latestDream) {
                // View the dream
                viewDream(latestDream.id);
                
                // Analyze it
                analyzeDream(latestDream.id);
            }
        });
        
        // Back to journal
        backToJournalBtn.addEventListener('click', () => {
            showSection(journalScreen);
        });
        
        // Analyze dream from detail view
        detailAnalyzeBtn.addEventListener('click', () => {
            if (currentDreamId) {
                analyzeDream(currentDreamId);
            }
        });
        
        // Explore community
        exploreCommunity.addEventListener('click', () => {
            showSection(communityScreen);
        });
        
        // Voice/Text entry toggle
        textEntryBtn.addEventListener('click', () => {
            textEntryBtn.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            textEntryBtn.classList.add('bg-dream-primary', 'text-white');
            
            voiceEntryBtn.classList.remove('bg-dream-primary', 'text-white');
            voiceEntryBtn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            
            textEntryArea.classList.remove('hidden');
            voiceEntryArea.classList.add('hidden');
        });
        
        voiceEntryBtn.addEventListener('click', () => {
            voiceEntryBtn.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            voiceEntryBtn.classList.add('bg-dream-primary', 'text-white');
            
            textEntryBtn.classList.remove('bg-dream-primary', 'text-white');
            textEntryBtn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            
            voiceEntryArea.classList.remove('hidden');
            textEntryArea.classList.add('hidden');
        });
        
        // Voice recording
        recordBtn.addEventListener('click', toggleVoiceRecording);
        stopRecordingBtn.addEventListener('click', toggleVoiceRecording);
        
        cancelRecordingBtn.addEventListener('click', () => {
            isRecording = false;
            recordBtn.classList.remove('recording-pulse');
            recordingStatus.textContent = 'Kayıt için tıklayın';
            voiceControls.classList.add('hidden');
            recordingResult.classList.add('hidden');
        });
        
        useTextBtn.addEventListener('click', () => {
            dreamDescription.value = voiceToText.textContent;
            textEntryBtn.click();
        });
        
        // Toggle password visibility
        document.querySelectorAll('.toggle-password').forEach(btn => {
            btn.addEventListener('click', function() {
                const input = this.previousElementSibling;
                const icon = this.querySelector('i');
                
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });
        
        // Account save changes button
        accountSaveChanges.addEventListener('click', () => {
            alert('Değişiklikleriniz kaydedildi.');
        });
        
        // Setup comment buttons for community
        function setupCommentButtons() {
            // Add event listeners to comment buttons
            document.querySelectorAll('.comment-btn').forEach(button => {
                button.addEventListener('click', function() {
                    // Find comment section for this dream
                    const dreamCard = this.closest('.dream-card');
                    const commentSection = dreamCard.querySelector('.dream-comments');
                    
                    // Toggle comment section visibility
                    commentSection.classList.toggle('hidden');
                    
                    // Change button text based on visibility
                    if (commentSection.classList.contains('hidden')) {
                        this.innerHTML = '<i class="fas fa-comment mr-1"></i> Yorum Yap';
                    } else {
                        this.innerHTML = '<i class="fas fa-chevron-up mr-1"></i> Yorumları Gizle';
                    }
                });
            });
            
            // Add event listeners to post comment buttons
            document.querySelectorAll('.post-comment-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (!isLoggedIn) {
                        showSection(loginScreen);
                        return;
                    }
                    
                    const commentSection = this.closest('.dream-comments');
                    const commentInput = commentSection.querySelector('.comment-input');
                    const isAnonymous = commentSection.querySelector('.comment-anonymous').checked;
                    
                    // Get comment text
                    const commentText = commentInput.value.trim();
                    if (!commentText) return;
                    
                    // Get comments container
                    const commentsContainer = commentSection.querySelector('.space-y-3');
                    
                    // Create new comment
                    const newComment = document.createElement('div');
                    newComment.classList.add('bg-gray-50', 'dark:bg-gray-700', 'p-3', 'rounded-lg');
                    
                    // Get user name based on anonymous selection
                    const commenterName = isAnonymous ? 'Anonim kullanıcı' : user.username;
                    
                    newComment.innerHTML = `
                        <div class="flex justify-between items-start mb-1">
                            <span class="font-medium text-sm">${commenterName}</span>
                            <span class="text-xs text-gray-500">Az önce</span>
                        </div>
                        <p class="text-sm text-gray-700 dark:text-gray-300">${commentText}</p>
                    `;
                    
                    // Add to comments
                    if (!commentsContainer) {
                        // Create comment container if it doesn't exist
                        const newContainer = document.createElement('div');
                        newContainer.classList.add('space-y-3');
                        newContainer.appendChild(newComment);
                        
                        // Insert before the form
                        const commentForm = commentSection.querySelector('.mt-3');
                        commentSection.insertBefore(newContainer, commentForm);
                    } else {
                        commentsContainer.appendChild(newComment);
                    }
                    
                    // Clear input
                    commentInput.value = '';
                });
            });
            
            // Share dream button
            const shareDreamBtn = document.getElementById('share-dream-btn');
            if (shareDreamBtn) {
                shareDreamBtn.addEventListener('click', function() {
                    const selectedDreamId = document.getElementById('share-dream-select').value;
                    if (!selectedDreamId) return;
                    
                    const shareOptions = document.getElementsByName('share-option');
                    let isAnonymous = true;
                    
                    // Get selected share option
                    for (const option of shareOptions) {
                        if (option.checked && option.value === 'named') {
                            isAnonymous = false;
                            break;
                        }
                    }
                    
                    // Find the dream
                    const dream = dreams.find(d => d.id === selectedDreamId);
                    if (!dream) return;
                    
                    // Show notification that dream was shared in a more user-friendly way
                    // Create notification element
                    const notification = document.createElement('div');
                    notification.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center';
                    notification.innerHTML = `
                        <i class="fas fa-check-circle mr-2 text-lg"></i>
                        <span>${isAnonymous ? 
                            'Rüyanız toplulukla anonim olarak paylaşıldı.' : 
                            `Rüyanız toplulukla "${user.username}" adıyla paylaşıldı.`}</span>
                    `;
                    document.body.appendChild(notification);
                    
                    // Remove notification after 3 seconds
                    setTimeout(() => {
                        notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                        setTimeout(() => {
                            document.body.removeChild(notification);
                        }, 500);
                    }, 3000);
                });
            }
        }
        
        // Initialize app
        initApp();
    </script>
</body>
</html>
